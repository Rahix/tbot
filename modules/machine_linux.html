

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tbot.machine.linux &mdash; tbot 0.10.9-5-ga47582c documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5349f25f" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/documentation_options.js?v=8047a51e"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="tbot.machine.board" href="machine_board.html" />
    <link rel="prev" title="tbot.machine" href="machine.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/tbot-logo-white.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">tbot CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pytest.html">pytest Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">Migrating from tbot 0.7.1</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="main.html"><code class="docutils literal notranslate"><span class="pre">tbot</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="log.html"><code class="docutils literal notranslate"><span class="pre">tbot.log</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="machine.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine</span></code></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">tbot.machine.linux</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#linux-shells">Linux Shells</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.linux.Bash"><code class="docutils literal notranslate"><span class="pre">Bash</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.linux.LinuxShell"><code class="docutils literal notranslate"><span class="pre">LinuxShell</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.escape"><code class="docutils literal notranslate"><span class="pre">LinuxShell.escape()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.exec"><code class="docutils literal notranslate"><span class="pre">LinuxShell.exec()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.exec0"><code class="docutils literal notranslate"><span class="pre">LinuxShell.exec0()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.test"><code class="docutils literal notranslate"><span class="pre">LinuxShell.test()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.env"><code class="docutils literal notranslate"><span class="pre">LinuxShell.env()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.run"><code class="docutils literal notranslate"><span class="pre">LinuxShell.run()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.open_channel"><code class="docutils literal notranslate"><span class="pre">LinuxShell.open_channel()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.interactive"><code class="docutils literal notranslate"><span class="pre">LinuxShell.interactive()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.subshell"><code class="docutils literal notranslate"><span class="pre">LinuxShell.subshell()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.username"><code class="docutils literal notranslate"><span class="pre">LinuxShell.username</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.fsroot"><code class="docutils literal notranslate"><span class="pre">LinuxShell.fsroot</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.LinuxShell.workdir"><code class="docutils literal notranslate"><span class="pre">LinuxShell.workdir</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#argument-types">Argument Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specials">Specials</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.AndThen"><code class="docutils literal notranslate"><span class="pre">AndThen</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.OrElse"><code class="docutils literal notranslate"><span class="pre">OrElse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Then"><code class="docutils literal notranslate"><span class="pre">Then</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Pipe"><code class="docutils literal notranslate"><span class="pre">Pipe</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.RedirStdout"><code class="docutils literal notranslate"><span class="pre">RedirStdout</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.RedirStderr"><code class="docutils literal notranslate"><span class="pre">RedirStderr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.RedirBoth"><code class="docutils literal notranslate"><span class="pre">RedirBoth</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.RedirStdin"><code class="docutils literal notranslate"><span class="pre">RedirStdin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.AppendStdout"><code class="docutils literal notranslate"><span class="pre">AppendStdout</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.AppendStderr"><code class="docutils literal notranslate"><span class="pre">AppendStderr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.AppendBoth"><code class="docutils literal notranslate"><span class="pre">AppendBoth</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Background"><code class="docutils literal notranslate"><span class="pre">Background</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Raw"><code class="docutils literal notranslate"><span class="pre">Raw</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#runcommandproxy">RunCommandProxy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.linux.RunCommandProxy"><code class="docutils literal notranslate"><span class="pre">RunCommandProxy</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.RunCommandProxy.terminate0"><code class="docutils literal notranslate"><span class="pre">RunCommandProxy.terminate0()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.RunCommandProxy.terminate"><code class="docutils literal notranslate"><span class="pre">RunCommandProxy.terminate()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.linux.CommandEndedException"><code class="docutils literal notranslate"><span class="pre">CommandEndedException</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#paths">Paths</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.linux.Path"><code class="docutils literal notranslate"><span class="pre">Path</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.host"><code class="docutils literal notranslate"><span class="pre">Path.host</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.at_host"><code class="docutils literal notranslate"><span class="pre">Path.at_host()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.stat"><code class="docutils literal notranslate"><span class="pre">Path.stat()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.exists"><code class="docutils literal notranslate"><span class="pre">Path.exists()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.is_dir"><code class="docutils literal notranslate"><span class="pre">Path.is_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.is_file"><code class="docutils literal notranslate"><span class="pre">Path.is_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.is_symlink"><code class="docutils literal notranslate"><span class="pre">Path.is_symlink()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.is_block_device"><code class="docutils literal notranslate"><span class="pre">Path.is_block_device()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.is_char_device"><code class="docutils literal notranslate"><span class="pre">Path.is_char_device()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.is_fifo"><code class="docutils literal notranslate"><span class="pre">Path.is_fifo()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.is_socket"><code class="docutils literal notranslate"><span class="pre">Path.is_socket()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.glob"><code class="docutils literal notranslate"><span class="pre">Path.glob()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.rglob"><code class="docutils literal notranslate"><span class="pre">Path.rglob()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.resolve"><code class="docutils literal notranslate"><span class="pre">Path.resolve()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.readlink"><code class="docutils literal notranslate"><span class="pre">Path.readlink()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.symlink_to"><code class="docutils literal notranslate"><span class="pre">Path.symlink_to()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.write_text"><code class="docutils literal notranslate"><span class="pre">Path.write_text()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.read_text"><code class="docutils literal notranslate"><span class="pre">Path.read_text()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.write_bytes"><code class="docutils literal notranslate"><span class="pre">Path.write_bytes()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.read_bytes"><code class="docutils literal notranslate"><span class="pre">Path.read_bytes()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.rmdir"><code class="docutils literal notranslate"><span class="pre">Path.rmdir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.unlink"><code class="docutils literal notranslate"><span class="pre">Path.unlink()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Path.mkdir"><code class="docutils literal notranslate"><span class="pre">Path.mkdir()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#workdir">Workdir</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Workdir"><code class="docutils literal notranslate"><span class="pre">Workdir</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#copy"><code class="docutils literal notranslate"><span class="pre">copy()</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.copy"><code class="docutils literal notranslate"><span class="pre">copy()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lab-host">Lab-Host</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.linux.Lab"><code class="docutils literal notranslate"><span class="pre">Lab</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Lab.build"><code class="docutils literal notranslate"><span class="pre">Lab.build()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#builder">Builder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.linux.Builder"><code class="docutils literal notranslate"><span class="pre">Builder</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Builder.toolchains"><code class="docutils literal notranslate"><span class="pre">Builder.toolchains</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.Builder.enable"><code class="docutils literal notranslate"><span class="pre">Builder.enable()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#toolchains">Toolchains</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.build.Toolchain"><code class="docutils literal notranslate"><span class="pre">Toolchain</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.build.DistroToolchain"><code class="docutils literal notranslate"><span class="pre">DistroToolchain</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.linux.build.EnvScriptToolchain"><code class="docutils literal notranslate"><span class="pre">EnvScriptToolchain</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#authenticators">Authenticators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.linux.auth.NoneAuthenticator"><code class="docutils literal notranslate"><span class="pre">NoneAuthenticator</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.linux.auth.PrivateKeyAuthenticator"><code class="docutils literal notranslate"><span class="pre">PrivateKeyAuthenticator</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.linux.auth.PasswordAuthenticator"><code class="docutils literal notranslate"><span class="pre">PasswordAuthenticator</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="machine_board.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.board</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="machine_connector.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.connector</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="machine_shell.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.shell</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="machine_channel.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.channel</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="error.html"><code class="docutils literal notranslate"><span class="pre">tbot.error</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="role.html"><code class="docutils literal notranslate"><span class="pre">tbot.role</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="selectable.html"><code class="docutils literal notranslate"><span class="pre">tbot.selectable</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testcase Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tc.html"><code class="docutils literal notranslate"><span class="pre">tbot.tc</span></code> - Builtin Testcases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/connector.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.connector</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/gdb.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.gdb</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/gpio.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.gpio</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/linux.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.linux</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/locking.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.locking</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/swupdate.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.swupdate</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/timing.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.timing</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/uboot.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.uboot</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/utils.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.utils</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing to tbot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSE.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><code class="docutils literal notranslate"><span class="pre">tbot.machine.linux</span></code></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/modules/machine_linux.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

           <div itemprop="articleBody">
             
  <section id="tbot-machine-linux">
<span id="module-tbot.machine.linux"></span><h1><code class="docutils literal notranslate"><span class="pre">tbot.machine.linux</span></code><a class="headerlink" href="#tbot-machine-linux" title="Link to this heading">¶</a></h1>
<p>This module contains utilities for interacting with linux hosts.  This includes:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#linux-shells"><span class="std std-ref">Linux Shells</span></a></p></li>
<li><p>tbot’s own path type: <a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">tbot.machine.linux.Path</span></code></a></p></li>
</ul>
<section id="linux-shells">
<span id="id1"></span><h2>Linux Shells<a class="headerlink" href="#linux-shells" title="Link to this heading">¶</a></h2>
<p>The base-class <a class="reference internal" href="#tbot.machine.linux.LinuxShell" title="tbot.machine.linux.LinuxShell"><code class="xref py py-class docutils literal notranslate"><span class="pre">tbot.machine.linux.LinuxShell</span></code></a> defines the common
interface all linux-shells should provide.  This interface consists of the
following methods:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.escape" title="tbot.machine.linux.LinuxShell.escape"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lnx.escape()</span></code></a> - Escape args
for the underlying shell.</p></li>
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.exec0" title="tbot.machine.linux.LinuxShell.exec0"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lnx.exec0()</span></code></a> - Run command
and ensure it succeeded.</p></li>
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.exec" title="tbot.machine.linux.LinuxShell.exec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lnx.exec()</span></code></a> - Run command and
return output and return code.</p></li>
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.run" title="tbot.machine.linux.LinuxShell.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lnx.run()</span></code></a> - Start a command
and allow a testcase to interact with its stdio.</p></li>
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.test" title="tbot.machine.linux.LinuxShell.test"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lnx.test()</span></code></a> - Run command and
return boolean whether it succeeded.</p></li>
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.env" title="tbot.machine.linux.LinuxShell.env"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lnx.env()</span></code></a> - Get/Set
environment variables.</p></li>
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.subshell" title="tbot.machine.linux.LinuxShell.subshell"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lnx.subshell()</span></code></a> - Start a
subshell environment.</p></li>
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.interactive" title="tbot.machine.linux.LinuxShell.interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lnx.interactive()</span></code></a> -
Start an interactive session for this machine.</p></li>
</ul>
<p>And the following properties:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.username" title="tbot.machine.linux.LinuxShell.username"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lnx.username</span></code></a> - Current
user.</p></li>
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.fsroot" title="tbot.machine.linux.LinuxShell.fsroot"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lnx.fsroot</span></code></a> - Path to the
file-system root (just for convenience).</p></li>
<li><p><a class="reference internal" href="#tbot.machine.linux.LinuxShell.workdir" title="tbot.machine.linux.LinuxShell.workdir"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lnx.workdir</span></code></a> - Path to a
directory which testcases can store files in.</p></li>
</ul>
<p>tbot contains implementations of
this interface for the following shells:</p>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.Bash">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">Bash</span></span><a class="reference internal" href="../_modules/tbot/machine/linux/bash.html#Bash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Bash" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tbot.machine.linux.LinuxShell" title="tbot.machine.linux.linux_shell.LinuxShell"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinuxShell</span></code></a></p>
<p>Bourne-again shell.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">LinuxShell</span></span><a class="reference internal" href="../_modules/tbot/machine/linux/linux_shell.html#LinuxShell"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.LinuxShell" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="machine_shell.html#tbot.machine.shell.Shell" title="tbot.machine.shell.Shell"><code class="xref py py-class docutils literal notranslate"><span class="pre">Shell</span></code></a></p>
<p>Base-class for linux shells.</p>
<p>This class defines the common interface for linux shells.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.escape">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">escape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Special</span><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/linux_shell.html#LinuxShell.escape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.LinuxShell.escape" title="Link to this definition">¶</a></dt>
<dd><p>Escape a string according to this shell’s escaping rules.</p>
<p>If multiple arguments are given, <code class="docutils literal notranslate"><span class="pre">.escape()</span></code> returns a string
containing each argument as a separate shell token.  This means:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bash</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">)</span>
<span class="c1"># foo bar</span>

<span class="n">bash</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s2">&quot;foo bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">)</span>
<span class="c1"># &quot;foo bar&quot; baz</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*args</strong> – Arguments to be escaped.  See <a class="reference internal" href="#linux-argtypes"><span class="std std-ref">Argument Types</span></a> for details.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string with quoted/escaped versions of the input arguments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.exec">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Special</span><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.13)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/linux_shell.html#LinuxShell.exec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.LinuxShell.exec" title="Link to this definition">¶</a></dt>
<dd><p>Run a command on this machine/shell.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">retcode</span><span class="p">,</span> <span class="n">output</span> <span class="o">=</span> <span class="n">mach</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;uname&quot;</span><span class="p">,</span> <span class="s2">&quot;-a&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">retcode</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*args</strong> – The command as separate arguments per command-line
token.  See <a class="reference internal" href="#linux-argtypes"><span class="std std-ref">Argument Types</span></a> for more info.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>)</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple with the return code of the command and its console
output.  Note that the output is <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> merged.
It will also contain a trailing newline in most cases.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.exec0">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exec0</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Special</span><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/linux_shell.html#LinuxShell.exec0"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.LinuxShell.exec0" title="Link to this definition">¶</a></dt>
<dd><p>Run a command and assert its return code to be 0.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">output</span> <span class="o">=</span> <span class="n">mach</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;uname&quot;</span><span class="p">,</span> <span class="s2">&quot;-a&quot;</span><span class="p">)</span>

<span class="c1"># This will raise an exception!</span>
<span class="n">mach</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;false&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*args</strong> – The command as separate arguments per command-line
token.  See <a class="reference internal" href="#linux-argtypes"><span class="std std-ref">Argument Types</span></a> for more info.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The command’s console output.  Note that the output is
<code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> merged.  It will also contain a trailing
newline in most cases.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.test">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Special</span><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/linux_shell.html#LinuxShell.test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.LinuxShell.test" title="Link to this definition">¶</a></dt>
<dd><p>Run a command and return a boolean value whether it succeeded.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">lnx</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;which&quot;</span><span class="p">,</span> <span class="s2">&quot;dropbear&quot;</span><span class="p">):</span>
    <span class="n">tbot</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;Dropbear is installed!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*args</strong> – The command as separate arguments per command-line
token.  See <a class="reference internal" href="#linux-argtypes"><span class="std std-ref">Argument Types</span></a> for more info.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Boolean representation of commands success.  <code class="docutils literal notranslate"><span class="pre">True</span></code> if
return code was <code class="docutils literal notranslate"><span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.env">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/linux_shell.html#LinuxShell.env"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.LinuxShell.env" title="Link to this definition">¶</a></dt>
<dd><p>Get or set an environment variable.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the value of a var</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">lnx</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;PATH&quot;</span><span class="p">)</span>

<span class="c1"># Set the value of a var</span>
<span class="n">lnx</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;DEBIAN_FRONTEND&quot;</span><span class="p">,</span> <span class="s2">&quot;noninteractive&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Environment variable name.</p></li>
<li><p><strong>value</strong> (<a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.Path"><em>tbot.machine.linux.Path</em></a><em>,</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Optional value to set the
variable to.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Current (new) value of the environment variable.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Special</span><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.ContextManager" title="(in Python v3.13)"><span class="pre">ContextManager</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tbot.machine.linux.RunCommandProxy" title="tbot.machine.linux.util.RunCommandProxy"><span class="pre">RunCommandProxy</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/linux_shell.html#LinuxShell.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.LinuxShell.run" title="Link to this definition">¶</a></dt>
<dd><p>Start an interactive command.</p>
<p>Interactive commands are started in a context-manager.  Inside, direct
interaction with the commands stdio is possible using a
<a class="reference internal" href="#tbot.machine.linux.RunCommandProxy" title="tbot.machine.linux.RunCommandProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunCommandProxy</span></code></a>.  <strong>You must call one
of the</strong> <code class="docutils literal notranslate"><span class="pre">terminate*()</span></code> <strong>methods before leaving the context!</strong>  The
proxy object provides an interface similar to pexpect for inteaction
(see the methods of the <a class="reference internal" href="machine_channel.html#tbot.machine.channel.Channel" title="tbot.machine.channel.Channel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Channel</span></code></a> class).</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">lh</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;gdb&quot;</span><span class="p">,</span> <span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="n">exe</span><span class="p">)</span> <span class="k">as</span> <span class="n">gdb</span><span class="p">:</span>
    <span class="c1"># Interact with gdb in this context</span>
    <span class="c1"># Wait for gdb to start up</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">read_until_prompt</span><span class="p">(</span><span class="s2">&quot;(gdb) &quot;</span><span class="p">)</span>

    <span class="c1"># Better for automated interaction</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;set confirm off&quot;</span><span class="p">)</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">read_until_prompt</span><span class="p">(</span><span class="s2">&quot;(gdb) &quot;</span><span class="p">)</span>

    <span class="c1"># Necessary so output is not clobbered with escape sequences</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;set style enabled off&quot;</span><span class="p">)</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">read_until_prompt</span><span class="p">(</span><span class="s2">&quot;(gdb) &quot;</span><span class="p">)</span>

    <span class="n">gdb</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;break main&quot;</span><span class="p">)</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">read_until_prompt</span><span class="p">(</span><span class="s2">&quot;(gdb) &quot;</span><span class="p">)</span>

    <span class="n">gdb</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;run&quot;</span><span class="p">)</span>
    <span class="c1"># We have hit the breakpoint</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">read_until_prompt</span><span class="p">(</span><span class="s2">&quot;(gdb) &quot;</span><span class="p">)</span>

    <span class="n">gdb</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;info locals&quot;</span><span class="p">,</span> <span class="n">read_back</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">local_info</span> <span class="o">=</span> <span class="n">gdb</span><span class="o">.</span><span class="n">read_until_prompt</span><span class="p">(</span><span class="s2">&quot;(gdb) &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">local_info</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
        <span class="n">var</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; = &quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">tbot</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Local variable `</span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">` has value `</span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s2">`!&quot;</span><span class="p">)</span>

    <span class="n">gdb</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;quit&quot;</span><span class="p">)</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">terminate0</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.open_channel">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">open_channel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Special</span><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="machine_channel.html#tbot.machine.channel.Channel" title="tbot.machine.channel.channel.Channel"><span class="pre">Channel</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/linux_shell.html#LinuxShell.open_channel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.LinuxShell.open_channel" title="Link to this definition">¶</a></dt>
<dd><p>Transform this machine into a channel for something else by running a command.</p>
<p>This is meant to be used for tools like <code class="docutils literal notranslate"><span class="pre">picocom</span></code> which connect the
terminal to a serial console.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ch</span> <span class="o">=</span> <span class="n">lnx</span><span class="o">.</span><span class="n">open_channel</span><span class="p">(</span><span class="s2">&quot;picocom&quot;</span><span class="p">,</span> <span class="s2">&quot;-b&quot;</span><span class="p">,</span> <span class="s2">&quot;115200&quot;</span><span class="p">,</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">)</span>

<span class="c1"># You can now interact with the channel for the serial console directly</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="machine_channel.html#tbot.machine.channel.Channel" title="tbot.machine.channel.Channel">tbot.machine.channel.Channel</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.interactive">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">interactive</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/linux_shell.html#LinuxShell.interactive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.LinuxShell.interactive" title="Link to this definition">¶</a></dt>
<dd><p>Start an interactive session on this machine.</p>
<p>This method will connect tbot’s stdio to the machine’s channel so you
can interactively run commands.  This method is used by the
<code class="docutils literal notranslate"><span class="pre">interactive_lab</span></code> and <code class="docutils literal notranslate"><span class="pre">interactive_linux</span></code> testcases.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.subshell">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">subshell</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Special</span><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.ContextManager" title="(in Python v3.13)"><span class="pre">ContextManager</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/linux_shell.html#LinuxShell.subshell"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.LinuxShell.subshell" title="Link to this definition">¶</a></dt>
<dd><p>Start a subshell environment.</p>
<p>Sometimes you need to isolate certain tests into their own shell
environment.  This method returns a context manager which does this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lnx</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;FOO&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">lnx</span><span class="o">.</span><span class="n">subshell</span><span class="p">():</span>
    <span class="n">lnx</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;FOO&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">lnx</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;FOO&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span>
</pre></div>
</div>
<p>You can also spawn a subshell with a custom command.  This can be used,
for example, to elevate privileges or switch user:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Not root right now</span>
<span class="k">assert</span> <span class="nb">int</span><span class="p">(</span><span class="n">lnx</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;EUID&quot;</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span>

<span class="k">with</span> <span class="n">lnx</span><span class="o">.</span><span class="n">subshell</span><span class="p">(</span><span class="s2">&quot;sudo&quot;</span><span class="p">,</span> <span class="s2">&quot;-ni&quot;</span><span class="p">,</span> <span class="s2">&quot;bash&quot;</span><span class="p">,</span> <span class="s2">&quot;--norc&quot;</span><span class="p">,</span> <span class="s2">&quot;--noprofile&quot;</span><span class="p">):</span>
    <span class="c1"># Root now!</span>
    <span class="k">assert</span> <span class="nb">int</span><span class="p">(</span><span class="n">lnx</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;EUID&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><em>tbot</em> expects the shell inside the subshell environment to be the
<strong>same</strong> shell as outside.  This means, spawning a sudo environment
which uses <code class="docutils literal notranslate"><span class="pre">zsh</span></code> instead of <code class="docutils literal notranslate"><span class="pre">bash</span></code> might lead to failures.</p>
<p>For <em>bash</em>, please spawn a <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">--norc</span> <span class="pre">--noprofile</span></code> for best
compatibility.</p>
<p>For <em>ash</em>, an <code class="docutils literal notranslate"><span class="pre">ash</span></code> is good enough.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.username">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">username</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#tbot.machine.linux.LinuxShell.username" title="Link to this definition">¶</a></dt>
<dd><p>Current username.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.fsroot">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fsroot</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#tbot.machine.linux.LinuxShell.fsroot" title="Link to this definition">¶</a></dt>
<dd><p>Path to the filesystem root of this machine, for convenience.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">lnx</span><span class="o">.</span><span class="n">fsroot</span> <span class="o">/</span> <span class="s2">&quot;usr&quot;</span> <span class="o">/</span> <span class="s2">&quot;lib&quot;</span>
<span class="k">assert</span> <span class="n">p</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tbot.machine.linux.LinuxShell.workdir">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">workdir</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Self</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#tbot.machine.linux.LinuxShell.workdir" title="Link to this definition">¶</a></dt>
<dd><p>Path to a directory which testcases can use to store files in.</p>
<p>If configured properly, tbot will make sure this directory exists.
Testcases should be able to deal with corrupt or missing files in this
directory.  Implementations should use <a class="reference internal" href="#tbot.machine.linux.Workdir" title="tbot.machine.linux.Workdir"><code class="xref py py-class docutils literal notranslate"><span class="pre">tbot.machine.linux.Workdir</span></code></a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is the defaut implementation</span>
<span class="nd">@property</span>
<span class="k">def</span><span class="w"> </span><span class="nf">workdir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">linux</span><span class="o">.</span><span class="n">Workdir</span><span class="o">.</span><span class="n">xdg_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<section id="argument-types">
<span id="linux-argtypes"></span><h3>Argument Types<a class="headerlink" href="#argument-types" title="Link to this heading">¶</a></h3>
<p>For a lot of methods defined in <a class="reference internal" href="#tbot.machine.linux.LinuxShell" title="tbot.machine.linux.LinuxShell"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinuxShell</span></code></a>, a
special set of types can be given as arguments.  This protects against a lot of
common errors.  The allowed types are:</p>
<ul>
<li><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> - Every string argument will be properly quoted so the shell
picks it up as only one parameter.  Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lnx</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello World!&quot;</span><span class="p">,</span> <span class="s2">&quot;Is this tbot?&quot;</span><span class="p">)</span>

<span class="c1"># Will run:</span>
<span class="c1">#    echo &quot;Hello World!&quot; &quot;Is this tbot?&quot;</span>
</pre></div>
</div>
</li>
<li><p><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">tbot.machine.linux.Path</span></code></a> - tbot’s path class keeps track of the
machine the path is associated with.  This prevents you from accidentally
using a path from one host on another.  The path class behaves like
<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pathlib</span></code></a> paths, so you can do things like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tftpdir</span> <span class="o">=</span> <span class="n">lnx</span><span class="o">.</span><span class="n">fsroot</span> <span class="o">/</span> <span class="s2">&quot;var&quot;</span> <span class="o">/</span> <span class="s2">&quot;lib&quot;</span> <span class="o">/</span> <span class="s2">&quot;tftpboot&quot;</span>
<span class="n">lnx</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;ls&quot;</span><span class="p">,</span> <span class="s2">&quot;-1&quot;</span><span class="p">,</span> <span class="n">tftpdir</span><span class="p">)</span>

<span class="k">if</span> <span class="p">(</span><span class="n">tftpdir</span> <span class="o">/</span> <span class="s2">&quot;u-boot.bin&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
    <span class="n">tbot</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;Binary exists!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>“Specials”</strong> - Sometimes you will need special shell-syntax for certain
operations, for example to redirect output of a command.  For these things,
tbot provides special “tokens”.  The full list can be found in
<a class="reference internal" href="#linux-specials"><span class="std std-ref">Specials</span></a>.  As an example, redirecting to a file works like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lnx</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;dmesg&quot;</span><span class="p">,</span> <span class="n">linux</span><span class="o">.</span><span class="n">RedirStdout</span><span class="p">(</span><span class="n">lnx</span><span class="o">.</span><span class="n">workdir</span> <span class="o">/</span> <span class="s2">&quot;kernel.log&quot;</span><span class="p">))</span>
<span class="c1"># Will run:</span>
<span class="c1">#    dmesg &gt;/tmp/tbot-wd/kernel.log</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="specials">
<span id="linux-specials"></span><h3>Specials<a class="headerlink" href="#specials" title="Link to this heading">¶</a></h3>
<p>Specials can be used as part of commands to use certain shell-syntaxes.  This
can be used to chain multiple commands or to redirect output.</p>
<dl class="py data">
<dt class="sig sig-object py" id="tbot.machine.linux.AndThen">
<span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">AndThen</span></span><a class="headerlink" href="#tbot.machine.linux.AndThen" title="Link to this definition">¶</a></dt>
<dd><p>Chain commands using <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lnx</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;sleep&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">linux</span><span class="o">.</span><span class="n">AndThen</span><span class="p">,</span> <span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="tbot.machine.linux.OrElse">
<span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">OrElse</span></span><a class="headerlink" href="#tbot.machine.linux.OrElse" title="Link to this definition">¶</a></dt>
<dd><p>Chain commands using <code class="docutils literal notranslate"><span class="pre">||</span></code>.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="tbot.machine.linux.Then">
<span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">Then</span></span><a class="headerlink" href="#tbot.machine.linux.Then" title="Link to this definition">¶</a></dt>
<dd><p>Chain commands using <code class="docutils literal notranslate"><span class="pre">;</span></code>.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="tbot.machine.linux.Pipe">
<span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">Pipe</span></span><a class="headerlink" href="#tbot.machine.linux.Pipe" title="Link to this definition">¶</a></dt>
<dd><p>Pipe the output of one command into another:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lnx</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;dmesg&quot;</span><span class="p">,</span> <span class="n">linux</span><span class="o">.</span><span class="n">Pipe</span><span class="p">,</span> <span class="s2">&quot;grep&quot;</span><span class="p">,</span> <span class="s2">&quot;usb&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.RedirStdout">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">RedirStdout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/special.html#RedirStdout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.RedirStdout" title="Link to this definition">¶</a></dt>
<dd><p>Redirect <code class="docutils literal notranslate"><span class="pre">stdout</span></code> (<code class="docutils literal notranslate"><span class="pre">&gt;...</span></code>) to a file.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.RedirStderr">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">RedirStderr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/special.html#RedirStderr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.RedirStderr" title="Link to this definition">¶</a></dt>
<dd><p>Redirect <code class="docutils literal notranslate"><span class="pre">stderr</span></code> (<code class="docutils literal notranslate"><span class="pre">2&gt;...</span></code>) to a file.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.RedirBoth">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">RedirBoth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/special.html#RedirBoth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.RedirBoth" title="Link to this definition">¶</a></dt>
<dd><p>Redirect both <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> (<code class="docutils literal notranslate"><span class="pre">&gt;...</span> <span class="pre">2&gt;&amp;1</span></code>) to a file.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.RedirStdin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">RedirStdin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/special.html#RedirStdin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.RedirStdin" title="Link to this definition">¶</a></dt>
<dd><p>Redirect to <code class="docutils literal notranslate"><span class="pre">stdin</span></code> (<code class="docutils literal notranslate"><span class="pre">&lt;...</span></code>) from a file.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.AppendStdout">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">AppendStdout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/special.html#AppendStdout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.AppendStdout" title="Link to this definition">¶</a></dt>
<dd><p>Redirect <code class="docutils literal notranslate"><span class="pre">stdout</span></code> (<code class="docutils literal notranslate"><span class="pre">&gt;&gt;...</span></code>) to a file, appending to the file rather
than overwriting its contents.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.1.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.AppendStderr">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">AppendStderr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/special.html#AppendStderr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.AppendStderr" title="Link to this definition">¶</a></dt>
<dd><p>Redirect <code class="docutils literal notranslate"><span class="pre">stderr</span></code> (<code class="docutils literal notranslate"><span class="pre">2&gt;&gt;...</span></code>) to a file, appending to the file rather
than overwriting its contents.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.1.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.AppendBoth">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">AppendBoth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/special.html#AppendBoth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.AppendBoth" title="Link to this definition">¶</a></dt>
<dd><p>Redirect both <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> (<code class="docutils literal notranslate"><span class="pre">&gt;&gt;...</span> <span class="pre">2&gt;&amp;1</span></code>) to a file,
appending to the file rather than overwriting its contents.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.1.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="tbot.machine.linux.Background">
<span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">Background</span></span><a class="headerlink" href="#tbot.machine.linux.Background" title="Link to this definition">¶</a></dt>
<dd><p>Tells the shell to run this command in the background (<code class="docutils literal notranslate"><span class="pre">&amp;</span></code>).</p>
<p>By default all output from the command is suppressed (by redirection to
<code class="docutils literal notranslate"><span class="pre">/dev/null</span></code>).  If you do want to save command output, use the alternate
form of <a class="reference internal" href="#tbot.machine.linux.Background" title="tbot.machine.linux.Background"><code class="xref py py-data docutils literal notranslate"><span class="pre">Background</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f1</span> <span class="o">=</span> <span class="n">lh</span><span class="o">.</span><span class="n">workdir</span> <span class="o">/</span> <span class="s2">&quot;stdout.txt&quot;</span>
<span class="n">f2</span> <span class="o">=</span> <span class="n">lh</span><span class="o">.</span><span class="n">workdir</span> <span class="o">/</span> <span class="s2">&quot;stderr.txt&quot;</span>

<span class="c1"># Just redirect stdout to a file, discard stderr</span>
<span class="n">linux</span><span class="o">.</span><span class="n">Background</span><span class="p">(</span><span class="n">stdout</span><span class="o">=</span><span class="n">f1</span><span class="p">)</span>
<span class="c1"># Just redirect stderr to a file, discard stdout</span>
<span class="n">linux</span><span class="o">.</span><span class="n">Background</span><span class="p">(</span><span class="n">stderr</span><span class="o">=</span><span class="n">f2</span><span class="p">)</span>
<span class="c1"># Redirect both to files</span>
<span class="n">linux</span><span class="o">.</span><span class="n">Background</span><span class="p">(</span><span class="n">stdout</span><span class="o">=</span><span class="n">f1</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">f2</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Beware of the side-effects of running commands in the background!  <strong>Never
ever add</strong> <code class="docutils literal notranslate"><span class="pre">linux.Background</span></code> <strong>after a command that you expect will
terminate at some point on its own!</strong>  This will potentially clobber an
unrelated command’s output which can have unexpected effects.  Only use
this special token with commands that will run forever until terminated
manually.  A good pattern to follow is this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lh</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;some&quot;</span><span class="p">,</span> <span class="s2">&quot;cmd&quot;</span><span class="p">,</span> <span class="s2">&quot;that&quot;</span><span class="p">,</span> <span class="s2">&quot;won&#39;t&quot;</span><span class="p">,</span> <span class="s2">&quot;terminate&quot;</span><span class="p">,</span> <span class="n">linux</span><span class="o">.</span><span class="n">Background</span><span class="p">)</span>
<span class="n">pid</span> <span class="o">=</span> <span class="n">lh</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;!&quot;</span><span class="p">)</span>

<span class="o">...</span>

<span class="n">lh</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;kill&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">linux</span><span class="o">.</span><span class="n">Then</span><span class="p">,</span> <span class="s2">&quot;wait&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.1: </span><code class="docutils literal notranslate"><span class="pre">Background</span></code> now always properly redirects stderr as well.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.Raw">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">Raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/special.html#Raw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Raw" title="Link to this definition">¶</a></dt>
<dd><p>Emits a raw string, bypassing shell quoting/escaping.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only use this if nothing else works!  <a class="reference internal" href="#tbot.machine.linux.Raw" title="tbot.machine.linux.Raw"><code class="xref py py-class docutils literal notranslate"><span class="pre">linux.Raw</span></code></a> can quickly lead to hard-to-find bugs.</p>
</div>
</dd></dl>

</section>
</section>
<section id="runcommandproxy">
<h2>RunCommandProxy<a class="headerlink" href="#runcommandproxy" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.RunCommandProxy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">RunCommandProxy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="machine_channel.html#tbot.machine.channel.Channel" title="tbot.machine.channel.channel.Channel"><span class="pre">Channel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_context</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tbot.machine.linux.RunCommandProxy" title="tbot.machine.linux.util.RunCommandProxy"><span class="pre">RunCommandProxy</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.13)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.13)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="machine.html#tbot.machine.Machine" title="tbot.machine.machine.Machine"><span class="pre">Machine</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/util.html#RunCommandProxy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.RunCommandProxy" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="machine_channel.html#tbot.machine.channel.Channel" title="tbot.machine.channel.channel.Channel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Channel</span></code></a></p>
<p>Proxy for interacting with a running command.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">RunCommandProxy</span></code> is created with a context-manager and
<a class="reference internal" href="#tbot.machine.linux.LinuxShell.run" title="tbot.machine.linux.LinuxShell.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LinuxShell.run()</span></code></a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">lh</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;gdb&quot;</span><span class="p">,</span> <span class="n">lh</span><span class="o">.</span><span class="n">workdir</span> <span class="o">/</span> <span class="s2">&quot;a.out&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">gdb</span><span class="p">:</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;target remote 127.0.0.1:3333&quot;</span><span class="p">)</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;load&quot;</span><span class="p">)</span>
    <span class="n">gdb</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;mon reset halt&quot;</span><span class="p">)</span>

    <span class="n">gdb</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;quit&quot;</span><span class="p">)</span>
    <span class="n">gbd</span><span class="o">.</span><span class="n">terminate0</span><span class="p">()</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">RunCommandProxy</span></code> has all methods of a <a class="reference internal" href="machine_channel.html#tbot.machine.channel.Channel" title="tbot.machine.channel.Channel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Channel</span></code></a>
for interacting with the remote.  Additionally, a few more methods exist
which are necessary to end a command’s invokation properly.  <strong>You must
always call one of them before leaving the context-manager!</strong>  These methods are:</p>
<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.RunCommandProxy.terminate0">
<span class="sig-name descname"><span class="pre">terminate0</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/util.html#RunCommandProxy.terminate0"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.RunCommandProxy.terminate0" title="Link to this definition">¶</a></dt>
<dd><p>Wait for the command to end <strong>successfully</strong>.</p>
<p>Asserts that the command returned with retcode 0.  If it did not, an
exception is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Remaining output of the command until completion.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.RunCommandProxy.terminate">
<span class="sig-name descname"><span class="pre">terminate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.13)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/util.html#RunCommandProxy.terminate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.RunCommandProxy.terminate" title="Link to this definition">¶</a></dt>
<dd><p>Wait for the command to end.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple of return code and remaining output.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.CommandEndedException">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">CommandEndedException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">match</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Match" title="(in Python v3.13)"><span class="pre">Match</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">b''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/util.html#CommandEndedException"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.CommandEndedException" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">DeathStringException</span></code>, <a class="reference internal" href="error.html#tbot.error.ChannelTakenError" title="tbot.error.ChannelTakenError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelTakenError</span></code></a></p>
<p>The command which was run (interactively) ended prematurely.</p>
<p>This exception might be raised when reading from (or writing to) a
<a class="reference internal" href="#tbot.machine.linux.RunCommandProxy" title="tbot.machine.linux.RunCommandProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunCommandProxy</span></code></a> and the remote command
exited during the call.  You can catch the exception but after receiving
it, no more interaction with the command is allowed except the final
<a class="reference internal" href="#tbot.machine.linux.RunCommandProxy.terminate0" title="tbot.machine.linux.RunCommandProxy.terminate0"><code class="xref py py-meth docutils literal notranslate"><span class="pre">terminate0()</span></code></a> or
<a class="reference internal" href="#tbot.machine.linux.RunCommandProxy.terminate" title="tbot.machine.linux.RunCommandProxy.terminate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">terminate()</span></code></a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">lh</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;command&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">foo</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">foo</span><span class="o">.</span><span class="n">read_until_prompt</span><span class="p">(</span><span class="s2">&quot;$ &quot;</span><span class="p">)</span>
            <span class="n">foo</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;echo some command&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">linux</span><span class="o">.</span><span class="n">CommandEndedException</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="n">foo</span><span class="o">.</span><span class="n">terminate0</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="paths">
<h2>Paths<a class="headerlink" href="#paths" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.Path">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">Path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">H</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generic" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">H</span></code>]</p>
<p>A path that is associated with a tbot machine.</p>
<p>A path can only be used with its associated host.  Using it with
any other host will raise an exception and will be detected by
a static typechecker.</p>
<p>Apart from that, <code class="docutils literal notranslate"><span class="pre">Path</span></code> behaves like a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">tbot.machine</span><span class="w"> </span><span class="kn">import</span> <span class="n">linux</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">linux</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">mach</span><span class="p">,</span> <span class="s2">&quot;/foo/bar&quot;</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">p</span> <span class="o">/</span> <span class="s2">&quot;bar&quot;</span> <span class="o">/</span> <span class="s2">&quot;baz&quot;</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">p2</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="n">mach</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;mkdir&quot;</span><span class="p">,</span> <span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
    <span class="n">mach</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;touch&quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
<span class="k">elif</span> <span class="ow">not</span> <span class="n">p2</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">p2</span><span class="si">}</span><span class="s2"> must be a normal file!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Create a new path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<a class="reference internal" href="#tbot.machine.linux.LinuxShell" title="tbot.machine.linux.LinuxShell"><em>linux.LinuxShell</em></a>) – Host this path should be associated with</p></li>
<li><p><strong>args</strong> – <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.PurePosixPath" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.PurePosixPath</span></code></a> constructor arguments</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.1: </span><code class="docutils literal notranslate"><span class="pre">Path</span></code> no longer inherits from <code class="docutils literal notranslate"><span class="pre">pathlib.PurePosixPath</span></code>.</p>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.host">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">host</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">H</span></em><a class="headerlink" href="#tbot.machine.linux.Path.host" title="Link to this definition">¶</a></dt>
<dd><p>Host associated with this path.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.at_host">
<span class="sig-name descname"><span class="pre">at_host</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">H</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.at_host"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.at_host" title="Link to this definition">¶</a></dt>
<dd><p>Convert this <code class="docutils literal notranslate"><span class="pre">Path</span></code> into a string representation assuming it should
be valid for the machine <code class="docutils literal notranslate"><span class="pre">host</span></code>.  An exception is raised if this
<code class="docutils literal notranslate"><span class="pre">Path</span></code> is for a different machine instead.</p>
<p>This prevents accidentally using a <code class="docutils literal notranslate"><span class="pre">Path</span></code> with the wrong host as much
as possible.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.stat">
<span class="sig-name descname"><span class="pre">stat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/os.html#os.stat_result" title="(in Python v3.13)"><span class="pre">stat_result</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.stat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.stat" title="Link to this definition">¶</a></dt>
<dd><p>Return the result of <code class="docutils literal notranslate"><span class="pre">stat</span></code> on this path.</p>
<p>Tries to imitate the results of <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.stat" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.stat()</span></code></a>, returns a
<a class="reference external" href="https://docs.python.org/3/library/os.html#os.stat_result" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.stat_result</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.exists">
<span class="sig-name descname"><span class="pre">exists</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.exists" title="Link to this definition">¶</a></dt>
<dd><p>Whether this path exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.is_dir">
<span class="sig-name descname"><span class="pre">is_dir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.is_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.is_dir" title="Link to this definition">¶</a></dt>
<dd><p>Whether this path points to a directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.is_file">
<span class="sig-name descname"><span class="pre">is_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.is_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.is_file" title="Link to this definition">¶</a></dt>
<dd><p>Whether this path points to a normal file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.is_symlink">
<span class="sig-name descname"><span class="pre">is_symlink</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.is_symlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.is_symlink" title="Link to this definition">¶</a></dt>
<dd><p>Whether this path points to a symlink.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.is_block_device">
<span class="sig-name descname"><span class="pre">is_block_device</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.is_block_device"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.is_block_device" title="Link to this definition">¶</a></dt>
<dd><p>Whether this path points to a block device.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.is_char_device">
<span class="sig-name descname"><span class="pre">is_char_device</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.is_char_device"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.is_char_device" title="Link to this definition">¶</a></dt>
<dd><p>Whether this path points to a character device.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.is_fifo">
<span class="sig-name descname"><span class="pre">is_fifo</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.is_fifo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.is_fifo" title="Link to this definition">¶</a></dt>
<dd><p>Whether this path points to a pipe(fifo).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.is_socket">
<span class="sig-name descname"><span class="pre">is_socket</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.is_socket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.is_socket" title="Link to this definition">¶</a></dt>
<dd><p>Whether this path points to a unix domain-socket.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.glob">
<span class="sig-name descname"><span class="pre">glob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">H</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.glob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.glob" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over this subtree and yield all existing files (of any
kind, including directories) matching the given relative pattern.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ubootdir</span> <span class="o">=</span> <span class="n">lh</span><span class="o">.</span><span class="n">workdir</span> <span class="o">/</span> <span class="s2">&quot;u-boot&quot;</span>

<span class="c1"># .glob() returns a list which can be iterated.</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">ubootdir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;common/*.c&quot;</span><span class="p">):</span>
    <span class="n">tbot</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

<span class="c1"># To use the globs in another commandline (note the `*`!):</span>
<span class="n">lh</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;ls&quot;</span><span class="p">,</span> <span class="s2">&quot;-l&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">ubootdir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;common/*.c&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>tbot <code class="docutils literal notranslate"><span class="pre">Path.glob()</span></code>’s behavior is not quite identical to
<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.glob" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.glob()</span></code></a>.  There are two key differences:</p>
<ol class="arabic simple">
<li><p>Only the last path component of the pattern may include globs.
Any globbing in parent components is ignored.  Thus, the
following pattern <strong>does not work</strong>: <code class="docutils literal notranslate"><span class="pre">co*/*.c</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">**</span></code> sequence is not supported.  In most cases, you can
use <a class="reference internal" href="#tbot.machine.linux.Path.rglob" title="tbot.machine.linux.Path.rglob"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Path.rglob()</span></code></a> instead.</p></li>
</ol>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.6: </span><code class="docutils literal notranslate"><span class="pre">Path.glob()</span></code> now properly escapes the pattern so even paths with
spaces are safe.  However, globbing is now only supported in the
last component of the path.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.rglob">
<span class="sig-name descname"><span class="pre">rglob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">H</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.rglob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.rglob" title="Link to this definition">¶</a></dt>
<dd><p>Recursively match all files beneath this path against <code class="docutils literal notranslate"><span class="pre">pattern</span></code>.</p>
<p>This is essentially equivalent to <code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">&lt;self&gt;</span> <span class="pre">-path</span> <span class="pre">'*/&lt;pattern&gt;'</span></code>.
Note that this path itself will always be excluded from the results.</p>
<p>This method returns an iterator over matching paths.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.6.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.resolve">
<span class="sig-name descname"><span class="pre">resolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">H</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.resolve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.resolve" title="Link to this definition">¶</a></dt>
<dd><p>Make the path absolute, resolving any symlinks.  A new path object is returned.</p>
<p>If the path doesn’t exist and <code class="docutils literal notranslate"><span class="pre">strict</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>,
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> is raised. If <code class="docutils literal notranslate"><span class="pre">strict</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>,
the last component may not exist.  The <code class="docutils literal notranslate"><span class="pre">False</span></code> behavior slightly
differs from the one in Python’s <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pathlib</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.6.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.readlink">
<span class="sig-name descname"><span class="pre">readlink</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">H</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.readlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.readlink" title="Link to this definition">¶</a></dt>
<dd><p>Return the path to which the symbolic link points.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.6.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.symlink_to">
<span class="sig-name descname"><span class="pre">symlink_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">H</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.symlink_to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.symlink_to" title="Link to this definition">¶</a></dt>
<dd><p>Make this path a symbolic link to <code class="docutils literal notranslate"><span class="pre">target</span></code>.  <strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">link</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">workdir</span> <span class="o">/</span> <span class="s2">&quot;link-name&quot;</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">fsroot</span> <span class="o">/</span> <span class="s2">&quot;etc&quot;</span> <span class="o">/</span> <span class="s2">&quot;os-release&quot;</span>
<span class="n">link</span><span class="o">.</span><span class="n">symlink_to</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.6.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.write_text">
<span class="sig-name descname"><span class="pre">write_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.write_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.write_text" title="Link to this definition">¶</a></dt>
<dd><p>Write <code class="docutils literal notranslate"><span class="pre">data</span></code> into the file this path points to.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">lnx</span><span class="o">.</span><span class="n">workdir</span> <span class="o">/</span> <span class="s2">&quot;foo.sh&quot;</span>

<span class="n">f</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s1">#!/bin/sh</span>
<span class="s1">set -e</span>

<span class="s1">echo &quot;Hello tbot!&quot;</span>
<span class="s1">ps ax</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>

<span class="n">f</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;chmod&quot;</span><span class="p">,</span> <span class="s2">&quot;+x&quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This string must contain ‘text’ in the sense that some control
characters are not allowed.  Consult the documentation of
<a class="reference internal" href="#tbot.machine.linux.LinuxShell.run" title="tbot.machine.linux.LinuxShell.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LinuxShell.run()</span></code></a> for
details.</p>
<p>Additionally, line-endings might be transformed according to the
tty’s settings.  This function is not meant for byte-by-byte
transfers, but for configuration files or small scripts.  If you
want to transfer a blob or a larger file, consider using
<a class="reference internal" href="tc.html#tbot.tc.shell.copy" title="tbot.tc.shell.copy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tbot.tc.shell.copy()</span></code></a> or (for small files)
<a class="reference internal" href="#tbot.machine.linux.Path.write_bytes" title="tbot.machine.linux.Path.write_bytes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Path.write_bytes()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.read_text">
<span class="sig-name descname"><span class="pre">read_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.read_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.read_text" title="Link to this definition">¶</a></dt>
<dd><p>Read the contents of a <em>text</em> file, pointed to by this path.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is for ‘text’ content only as line-endings might not be
transferred as contained in the file (Will always use a single
<code class="docutils literal notranslate"><span class="pre">\n</span></code>).  If you want to transfer a file byte-by-byte, consider
using <a class="reference internal" href="tc.html#tbot.tc.shell.copy" title="tbot.tc.shell.copy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tbot.tc.shell.copy()</span></code></a> instead.  For small files,
<a class="reference internal" href="#tbot.machine.linux.Path.read_bytes" title="tbot.machine.linux.Path.read_bytes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Path.write_bytes()</span></code></a>
might also be an option.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.write_bytes">
<span class="sig-name descname"><span class="pre">write_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.write_bytes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.write_bytes" title="Link to this definition">¶</a></dt>
<dd><p>Write binary <code class="docutils literal notranslate"><span class="pre">data</span></code> into the file this path points to.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method ensures exact byte-by-byte transfer.  To do so, it
encodes the data using base64 which makes console output less
readable.  If you intend to transfer text data, please use
<a class="reference internal" href="#tbot.machine.linux.Path.write_text" title="tbot.machine.linux.Path.write_text"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Path.write_text()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.read_bytes">
<span class="sig-name descname"><span class="pre">read_bytes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.read_bytes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.read_bytes" title="Link to this definition">¶</a></dt>
<dd><p>Read the contents of a file, pointed to by this path.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method ensures exact byte-by-byte transfer.  To do so, it
encodes the data using base64 which makes console output less
readable.  If you intend to transfer text data, please use
<a class="reference internal" href="#tbot.machine.linux.Path.read_text" title="tbot.machine.linux.Path.read_text"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Path.read_text()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.rmdir">
<span class="sig-name descname"><span class="pre">rmdir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.rmdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.rmdir" title="Link to this definition">¶</a></dt>
<dd><p>Remove the directory pointed to by this path. The directory must be
empty.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.unlink">
<span class="sig-name descname"><span class="pre">unlink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.unlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.unlink" title="Link to this definition">¶</a></dt>
<dd><p>Remove the file or symbolic link from the filesystem. If the path points
to a directory, use <a class="reference internal" href="#tbot.machine.linux.Path.rmdir" title="tbot.machine.linux.Path.rmdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Path.rmdir()</span></code></a> instead.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">missing_ok</span></code> is false (the default), <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> is
raised if the path does not exist.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Path.mkdir">
<span class="sig-name descname"><span class="pre">mkdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exist_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/path.html#Path.mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Path.mkdir" title="Link to this definition">¶</a></dt>
<dd><p>Create a directory at the path this object represents.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">parents</span></code> is false (the default), a missing parent causes
<code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> to be raised. If <code class="docutils literal notranslate"><span class="pre">parents</span></code> is true, missing
parent directories are created as needed.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">exist_ok</span></code> is false (the default), a <code class="docutils literal notranslate"><span class="pre">FileExistsError</span></code> is raised
if the path already exists. If <code class="docutils literal notranslate"><span class="pre">exist_ok</span></code> is true, a
<code class="docutils literal notranslate"><span class="pre">FileExistsError</span></code> exception be suppressed if the target path exists
and is a directory.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.1.</span></p>
</div>
</dd></dl>

</dd></dl>

<section id="workdir">
<h3>Workdir<a class="headerlink" href="#workdir" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.Workdir">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">Workdir</span></span><a class="reference internal" href="../_modules/tbot/machine/linux/workdir.html#Workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Workdir" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Workdir.static">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">static</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">H</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pathstr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Workdir</span><span class="p"><span class="pre">[</span></span><span class="pre">H</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/workdir.html#Workdir.static"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Workdir.static" title="Link to this definition">¶</a></dt>
<dd><p>Create a workdir in a static location, described by <code class="docutils literal notranslate"><span class="pre">pathstr</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">tbot</span><span class="o">.</span><span class="n">acquire_lab</span><span class="p">()</span> <span class="k">as</span> <span class="n">lh</span><span class="p">:</span>
    <span class="n">workdir</span> <span class="o">=</span> <span class="n">linux</span><span class="o">.</span><span class="n">Workdir</span><span class="o">.</span><span class="n">static</span><span class="p">(</span><span class="n">lh</span><span class="p">,</span> <span class="s2">&quot;/tmp/tbot-my-workdir&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Workdir.athome">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">athome</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">H</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Workdir</span><span class="p"><span class="pre">[</span></span><span class="pre">H</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/workdir.html#Workdir.athome"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Workdir.athome" title="Link to this definition">¶</a></dt>
<dd><p>Create a workdir below the current users home directory.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">tbot</span><span class="o">.</span><span class="n">acquire_lab</span><span class="p">()</span> <span class="k">as</span> <span class="n">lh</span><span class="p">:</span>
    <span class="c1"># Use ~/tbot-foo-dir</span>
    <span class="n">workdir</span> <span class="o">=</span> <span class="n">linux</span><span class="o">.</span><span class="n">Workdir</span><span class="o">.</span><span class="n">athome</span><span class="p">(</span><span class="n">lh</span><span class="p">,</span> <span class="s2">&quot;tbot-foo-dir&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>tbot will query the <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> environment variable for the location of
the current users home directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Workdir.xdg_data">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">xdg_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">H</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Workdir</span><span class="p"><span class="pre">[</span></span><span class="pre">H</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/workdir.html#Workdir.xdg_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Workdir.xdg_data" title="Link to this definition">¶</a></dt>
<dd><p>Create a workdir in <code class="docutils literal notranslate"><span class="pre">$XDG_DATA_HOME/tbot</span></code> (usually <code class="docutils literal notranslate"><span class="pre">~/.local/share/tbot</span></code>).</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">tbot</span><span class="o">.</span><span class="n">acquire_lab</span><span class="p">()</span> <span class="k">as</span> <span class="n">lh</span><span class="p">:</span>
    <span class="c1"># Use ~/.local/share/tbot/foo-dir</span>
    <span class="n">workdir</span> <span class="o">=</span> <span class="n">linux</span><span class="o">.</span><span class="n">Workdir</span><span class="o">.</span><span class="n">xdg_data</span><span class="p">(</span><span class="n">lh</span><span class="p">,</span> <span class="s2">&quot;foo-dir&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Workdir.xdg_runtime">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">xdg_runtime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">H</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Workdir</span><span class="p"><span class="pre">[</span></span><span class="pre">H</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/workdir.html#Workdir.xdg_runtime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Workdir.xdg_runtime" title="Link to this definition">¶</a></dt>
<dd><p>Create a workdir in <code class="docutils literal notranslate"><span class="pre">$XDG_RUNTIME_DIR</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">$XDG_RUNTIME_DIR</span></code> is meant for <em>non-essential runtime files and
other file objects (such as sockets, named pipes, …)</em> as specified by
the <a class="reference external" href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG Base Directory Specification</a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">tbot</span><span class="o">.</span><span class="n">acquire_lab</span><span class="p">()</span> <span class="k">as</span> <span class="n">lh</span><span class="p">:</span>
    <span class="c1"># Results in `$XDG_RUNTIME_DIR/tbot/tbot-pipes`</span>
    <span class="n">workdir</span> <span class="o">=</span> <span class="n">linux</span><span class="o">.</span><span class="n">Workdir</span><span class="o">.</span><span class="n">xdg_runtime</span><span class="p">(</span><span class="n">lh</span><span class="p">,</span> <span class="s2">&quot;tbot-pipes&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="copy">
<h3><code class="docutils literal notranslate"><span class="pre">copy()</span></code><a class="headerlink" href="#copy" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="tbot.machine.linux.copy">
<span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">H1</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><span class="pre">H2</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/copy.html#copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.copy" title="Link to this definition">¶</a></dt>
<dd><p>Copy a file, possibly from one host to another.</p>
<p>The following transfers are currently supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">H</span></code> 🢥 <code class="docutils literal notranslate"><span class="pre">H</span></code> (transfer without changing host)</p></li>
<li><p><strong>lab-host</strong> 🢥 <strong>ssh-machine</strong> (<a class="reference internal" href="machine_connector.html#tbot.machine.connector.SSHConnector" title="tbot.machine.connector.SSHConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSHConnector</span></code></a>, using <code class="docutils literal notranslate"><span class="pre">scp</span></code>)</p></li>
<li><p><strong>ssh-machine</strong> 🢥 <strong>lab-host</strong> (Using <code class="docutils literal notranslate"><span class="pre">scp</span></code>)</p></li>
<li><p><strong>local-host</strong> 🢥 <strong>paramiko-host</strong> (<a class="reference internal" href="machine_connector.html#tbot.machine.connector.ParamikoConnector" title="tbot.machine.connector.ParamikoConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParamikoConnector</span></code></a>, using <code class="docutils literal notranslate"><span class="pre">scp</span></code>)</p></li>
<li><p><strong>local-host</strong> 🢥 <strong>ssh-machine</strong> (<a class="reference internal" href="machine_connector.html#tbot.machine.connector.SSHConnector" title="tbot.machine.connector.SSHConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSHConnector</span></code></a>, using <code class="docutils literal notranslate"><span class="pre">scp</span></code>)</p></li>
<li><p><strong>paramiko-host</strong>/<strong>ssh-machine</strong> 🢥 <strong>local-host</strong> (Using <code class="docutils literal notranslate"><span class="pre">scp</span></code>)</p></li>
</ul>
<p>The following transfers are <strong>not</strong> supported:</p>
<ul class="simple">
<li><p><strong>ssh-machine</strong> 🢥 <strong>ssh-machine</strong> (There is no guarantee that two remote hosts can
connect to each other.  If you need this, transfer to the lab-host first
and then to the other remote)</p></li>
<li><p><strong>lab-host</strong> 🢥 <strong>board-machine</strong> (Transfers over serial are not (yet) implemented.
To ‘upload’ files, connect to your target via ssh or use a tftp download)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p1</strong> (<a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.Path"><em>linux.Path</em></a>) – Exisiting path to be copied</p></li>
<li><p><strong>p2</strong> (<a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.Path"><em>linux.Path</em></a>) – Target where <code class="docutils literal notranslate"><span class="pre">p1</span></code> should be copied</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can combine this function with <a class="reference internal" href="../contrib/utils.html#tbot_contrib.utils.hashcmp" title="tbot_contrib.utils.hashcmp"><code class="xref py py-func docutils literal notranslate"><span class="pre">tbot_contrib.utils.hashcmp()</span></code></a>
to only copy a file when the hashsums of source and destination
mismatch:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">tbot_contrib</span><span class="w"> </span><span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tbot.tc</span><span class="w"> </span><span class="kn">import</span> <span class="n">shell</span>

<span class="o">...</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">hashcmp</span><span class="p">(</span><span class="n">path_a</span><span class="p">,</span> <span class="n">path_b</span><span class="p">)</span>
    <span class="n">shell</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">path_a</span><span class="p">,</span> <span class="n">path_b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.10.2.</span></p>
</div>
</dd></dl>

</section>
</section>
<section id="lab-host">
<h2>Lab-Host<a class="headerlink" href="#lab-host" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.Lab">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">Lab</span></span><a class="reference internal" href="../_modules/tbot/machine/linux/lab.html#Lab"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Lab" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tbot.machine.linux.LinuxShell" title="tbot.machine.linux.linux_shell.LinuxShell"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinuxShell</span></code></a></p>
<p>Mixin for marking a machine as a lab-host.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Lab.build">
<span class="sig-name descname"><span class="pre">build</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#tbot.machine.linux.Builder" title="tbot.machine.linux.build.Builder"><span class="pre">Builder</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/lab.html#Lab.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Lab.build" title="Link to this definition">¶</a></dt>
<dd><p>Return the default build-host for this lab.</p>
<p>If your lab does not contain a build-capable machine, just leave this
method as is.  tbot will raise an exception if a testcase attempts
accessing the build-host anyway.</p>
</dd></dl>

</dd></dl>

</section>
<section id="builder">
<h2>Builder<a class="headerlink" href="#builder" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="#tbot.machine.linux.Builder" title="tbot.machine.linux.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Builder</span></code></a> mixin allows marking a machine as a build-host.  This
means generic testcases like <code class="docutils literal notranslate"><span class="pre">uboot.build</span></code> can use it to automatically build projects.  For this
to work, a build-host needs to specify which toolchains it has installed and where tbot can find
them.</p>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.Builder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.</span></span><span class="sig-name descname"><span class="pre">Builder</span></span><a class="reference internal" href="../_modules/tbot/machine/linux/build.html#Builder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Builder" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tbot.machine.linux.LinuxShell" title="tbot.machine.linux.linux_shell.LinuxShell"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinuxShell</span></code></a></p>
<p>Mixin to mark a machine as a build-host.</p>
<p>You need to define the <code class="docutils literal notranslate"><span class="pre">toolchain()</span></code> method when using this mixin.  You
can then use the <code class="docutils literal notranslate"><span class="pre">enable()</span></code> method to enable a toolchain and compile
projects with it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">MyBuildHost</span><span class="p">(</span><span class="n">lh</span><span class="p">)</span> <span class="k">as</span> <span class="n">bh</span><span class="p">:</span>
    <span class="n">bh</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="s2">&quot;uptime&quot;</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">bh</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="s2">&quot;generic-armv7a-hf&quot;</span><span class="p">):</span>
        <span class="n">cc</span> <span class="o">=</span> <span class="n">bh</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;CC&quot;</span><span class="p">)</span>
        <span class="n">bh</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="n">linux</span><span class="o">.</span><span class="n">Raw</span><span class="p">(</span><span class="n">cc</span><span class="p">),</span> <span class="s2">&quot;main.c&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you look closely, I have used <code class="docutils literal notranslate"><span class="pre">linux.Raw(cc)</span></code> in the <code class="docutils literal notranslate"><span class="pre">exec0()</span></code>
call.  This is necessary because a lot of toolchains define <code class="docutils literal notranslate"><span class="pre">$CC</span></code> as
something like</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CC=arm-poky-linux-gnueabi-gcc -march=armv7-a -mfpu=neon -mfloat-abi=hard -mcpu=cortex-a8
</pre></div>
</div>
<p>where some parameters are already included.  Without the
<a class="reference internal" href="#tbot.machine.linux.Raw" title="tbot.machine.linux.Raw"><code class="xref py py-class docutils literal notranslate"><span class="pre">linux.Raw</span></code></a>, tbot would run</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CC</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>main.c
</pre></div>
</div>
<p>where the arguments are interpreted as part of the path to the compiler.
This will obviously fail so instead, with the <a class="reference internal" href="#tbot.machine.linux.Raw" title="tbot.machine.linux.Raw"><code class="xref py py-class docutils literal notranslate"><span class="pre">linux.Raw</span></code></a>,
tbot will run</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="si">${</span><span class="nv">CC</span><span class="si">}</span><span class="w"> </span>main.c
</pre></div>
</div>
<p>where the shell expansion will do the right thing.</p>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="tbot.machine.linux.Builder.toolchains">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">toolchains</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.build.Toolchain" title="tbot.machine.linux.build.Toolchain"><span class="pre">Toolchain</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#tbot.machine.linux.Builder.toolchains" title="Link to this definition">¶</a></dt>
<dd><p>Return a dictionary of all toolchains that exist on this buildhost.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span><span class="w"> </span><span class="nf">toolchains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">linux</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">Toolchain</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;armv7a&quot;</span><span class="p">:</span> <span class="n">linux</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">DistroToolchain</span><span class="p">(</span><span class="s2">&quot;arm&quot;</span><span class="p">,</span> <span class="s2">&quot;arm-linux-gnueabi-&quot;</span><span class="p">),</span>
        <span class="s2">&quot;armv8&quot;</span><span class="p">:</span> <span class="n">linux</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">DistroToolchain</span><span class="p">(</span><span class="s2">&quot;aarch64&quot;</span><span class="p">,</span> <span class="s2">&quot;aarch64-linux-gnu-&quot;</span><span class="p">),</span>
        <span class="s2">&quot;mipsel&quot;</span><span class="p">:</span> <span class="n">linux</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">DistroToolchain</span><span class="p">(</span><span class="s2">&quot;mips&quot;</span><span class="p">,</span> <span class="s2">&quot;mipsel-linux-gnu-&quot;</span><span class="p">),</span>
    <span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.Builder.enable">
<span class="sig-name descname"><span class="pre">enable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/build.html#Builder.enable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.Builder.enable" title="Link to this definition">¶</a></dt>
<dd><p>Enable the toolchain for <code class="docutils literal notranslate"><span class="pre">arch</span></code> on this BuildHost instance.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">lh</span><span class="o">.</span><span class="n">build</span><span class="p">()</span> <span class="k">as</span> <span class="n">bh</span><span class="p">:</span>
    <span class="c1"># Now we are on the buildhost</span>

    <span class="k">with</span> <span class="n">bh</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="s2">&quot;generic-armv7a-hf&quot;</span><span class="p">):</span>
        <span class="c1"># Toolchain is enabled here</span>
        <span class="n">cc</span> <span class="o">=</span> <span class="n">bh</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;CC&quot;</span><span class="p">)</span>
        <span class="n">bh</span><span class="o">.</span><span class="n">exec0</span><span class="p">(</span><span class="n">linux</span><span class="o">.</span><span class="n">Raw</span><span class="p">(</span><span class="n">cc</span><span class="p">),</span> <span class="s2">&quot;--version&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<section id="toolchains">
<span id="module-tbot.machine.linux.build"></span><h3>Toolchains<a class="headerlink" href="#toolchains" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.build.Toolchain">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.build.</span></span><span class="sig-name descname"><span class="pre">Toolchain</span></span><a class="reference internal" href="../_modules/tbot/machine/linux/build.html#Toolchain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.build.Toolchain" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a></p>
<p>Generic toolchain type.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.linux.build.Toolchain.enable">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">enable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tbot.machine.linux.Builder" title="tbot.machine.linux.build.Builder"><span class="pre">Builder</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/linux/build.html#Toolchain.enable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.build.Toolchain.enable" title="Link to this definition">¶</a></dt>
<dd><p>Enable this toolchain on the given <code class="docutils literal notranslate"><span class="pre">host</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.build.DistroToolchain">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.build.</span></span><span class="sig-name descname"><span class="pre">DistroToolchain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/build.html#DistroToolchain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.build.DistroToolchain" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tbot.machine.linux.build.Toolchain" title="tbot.machine.linux.build.Toolchain"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toolchain</span></code></a></p>
<p>Toolchain that was installed from distribution repositories.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span><span class="w"> </span><span class="nf">toolchains</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;armv7a&quot;</span><span class="p">:</span> <span class="n">linux</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">DistroToolchain</span><span class="p">(</span><span class="s2">&quot;arm&quot;</span><span class="p">,</span> <span class="s2">&quot;arm-linux-gnueabi-&quot;</span><span class="p">),</span>
        <span class="s2">&quot;armv8&quot;</span><span class="p">:</span> <span class="n">linux</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">DistroToolchain</span><span class="p">(</span><span class="s2">&quot;aarch64&quot;</span><span class="p">,</span> <span class="s2">&quot;aarch64-linux-gnu-&quot;</span><span class="p">),</span>
    <span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.build.EnvScriptToolchain">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.build.</span></span><span class="sig-name descname"><span class="pre">EnvScriptToolchain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tbot.machine.linux.Builder" title="tbot.machine.linux.build.Builder"><span class="pre">Builder</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/build.html#EnvScriptToolchain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.build.EnvScriptToolchain" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tbot.machine.linux.build.Toolchain" title="tbot.machine.linux.build.Toolchain"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toolchain</span></code></a></p>
<p>Toolchain that is initialized using an env script (e.g. yocto toolchain).</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span><span class="w"> </span><span class="nf">toolchains</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">yocto_root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fsroot</span> <span class="o">/</span> <span class="s2">&quot;opt&quot;</span> <span class="o">/</span> <span class="s2">&quot;poky&quot;</span> <span class="o">/</span> <span class="s2">&quot;2.6&quot;</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;cortexa8hf&quot;</span><span class="p">:</span> <span class="n">linux</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">EnvScriptToolchain</span><span class="p">(</span>
            <span class="n">yocto_root</span> <span class="o">/</span> <span class="s2">&quot;environment-setup-cortexa8hf-neon-poky-linux-gnueabi&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Create a new EnvScriptToolchain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.Path"><em>linux.Path</em></a>) – Path to the env script</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="authenticators">
<span id="module-tbot.machine.linux.auth"></span><h2>Authenticators<a class="headerlink" href="#authenticators" title="Link to this heading">¶</a></h2>
<p>For logging in via SSH using <a class="reference internal" href="machine_connector.html#tbot.machine.connector.ParamikoConnector" title="tbot.machine.connector.ParamikoConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParamikoConnector</span></code></a> or
<a class="reference internal" href="machine_connector.html#tbot.machine.connector.SSHConnector" title="tbot.machine.connector.SSHConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSHConnector</span></code></a>, tbot provides the following ‘authenticators’:</p>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.auth.NoneAuthenticator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.auth.</span></span><span class="sig-name descname"><span class="pre">NoneAuthenticator</span></span><a class="reference internal" href="../_modules/tbot/machine/linux/auth.html#NoneAuthenticator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.auth.NoneAuthenticator" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">AuthenticatorBase</span></code></p>
<p>Most primitive authenticator.</p>
<p>Tries not passing any specific credentials and hopes ssh-config already
contains all necessary infos.  This is the default.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.auth.PrivateKeyAuthenticator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.auth.</span></span><span class="sig-name descname"><span class="pre">PrivateKeyAuthenticator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#tbot.machine.linux.Path" title="tbot.machine.linux.path.Path"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.PurePath" title="(in Python v3.13)"><span class="pre">PurePath</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/auth.html#PrivateKeyAuthenticator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.auth.PrivateKeyAuthenticator" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">AuthenticatorBase</span></code></p>
<p>Authenticate using a private-key file.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MySSHHost</span><span class="p">(</span><span class="n">connector</span><span class="o">.</span><span class="n">SSHConnector</span><span class="p">,</span> <span class="n">linux</span><span class="o">.</span><span class="n">Bash</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="s2">&quot;foouser&quot;</span>
    <span class="n">authenticator</span> <span class="o">=</span> <span class="n">linux</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">PrivateKeyAuthenticator</span><span class="p">(</span><span class="s2">&quot;/home/foo/.ssh/id_rsa_foo&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.linux.auth.PasswordAuthenticator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.linux.auth.</span></span><span class="sig-name descname"><span class="pre">PasswordAuthenticator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/linux/auth.html#PasswordAuthenticator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.linux.auth.PasswordAuthenticator" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">AuthenticatorBase</span></code></p>
<p>Authenticate using a password.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>This method is very insecure and might lead to <strong>PASSWORDS BEING STOLEN</strong>.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MySSHHost</span><span class="p">(</span><span class="n">connector</span><span class="o">.</span><span class="n">SSHConnector</span><span class="p">,</span> <span class="n">linux</span><span class="o">.</span><span class="n">Bash</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="s2">&quot;root&quot;</span>
    <span class="n">authenticator</span> <span class="o">=</span> <span class="n">linux</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">PasswordAuthenticator</span><span class="p">(</span><span class="s2">&quot;hunter2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
    <a href="https://github.com/Rahix/tbot">
        <img style="position: absolute; top: 0; right: 0; border: 0;" decoding="async" width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" loading="lazy" data-recalc-dims="1">
    </a>

          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="machine.html" class="btn btn-neutral float-left" title="tbot.machine" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="machine_board.html" class="btn btn-neutral float-right" title="tbot.machine.board" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Rahix.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>