

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tbot.machine.channel &mdash; tbot 0.10.9-5-ga47582c documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5349f25f" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/documentation_options.js?v=8047a51e"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="tbot.error" href="error.html" />
    <link rel="prev" title="tbot.machine.shell" href="machine_shell.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/tbot-logo-white.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">tbot CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pytest.html">pytest Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">Migrating from tbot 0.7.1</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="main.html"><code class="docutils literal notranslate"><span class="pre">tbot</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="log.html"><code class="docutils literal notranslate"><span class="pre">tbot.log</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="machine.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="machine_linux.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.linux</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="machine_board.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.board</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="machine_connector.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.connector</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="machine_shell.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.shell</span></code></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">tbot.machine.channel</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#channel-class"><code class="docutils literal notranslate"><span class="pre">Channel</span></code> class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.channel.Channel"><code class="docutils literal notranslate"><span class="pre">Channel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.slow_send_delay"><code class="docutils literal notranslate"><span class="pre">Channel.slow_send_delay</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.slow_send_chunksize"><code class="docutils literal notranslate"><span class="pre">Channel.slow_send_chunksize</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.write"><code class="docutils literal notranslate"><span class="pre">Channel.write()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.read"><code class="docutils literal notranslate"><span class="pre">Channel.read()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.read_iter"><code class="docutils literal notranslate"><span class="pre">Channel.read_iter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.with_stream"><code class="docutils literal notranslate"><span class="pre">Channel.with_stream()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.fileno"><code class="docutils literal notranslate"><span class="pre">Channel.fileno()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.close"><code class="docutils literal notranslate"><span class="pre">Channel.close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.closed"><code class="docutils literal notranslate"><span class="pre">Channel.closed</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.send"><code class="docutils literal notranslate"><span class="pre">Channel.send()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.sendline"><code class="docutils literal notranslate"><span class="pre">Channel.sendline()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.sendcontrol"><code class="docutils literal notranslate"><span class="pre">Channel.sendcontrol()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.sendintr"><code class="docutils literal notranslate"><span class="pre">Channel.sendintr()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.readline"><code class="docutils literal notranslate"><span class="pre">Channel.readline()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.expect"><code class="docutils literal notranslate"><span class="pre">Channel.expect()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.with_prompt"><code class="docutils literal notranslate"><span class="pre">Channel.with_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.read_until_prompt"><code class="docutils literal notranslate"><span class="pre">Channel.read_until_prompt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.read_until_timeout"><code class="docutils literal notranslate"><span class="pre">Channel.read_until_timeout()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.borrow"><code class="docutils literal notranslate"><span class="pre">Channel.borrow()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.take"><code class="docutils literal notranslate"><span class="pre">Channel.take()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.Channel.attach_interactive"><code class="docutils literal notranslate"><span class="pre">Channel.attach_interactive()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#search-strings">Search Strings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.channel.ConvenientSearchString"><code class="docutils literal notranslate"><span class="pre">ConvenientSearchString</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#expect-result">Expect Result</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.channel.channel.ExpectResult"><code class="docutils literal notranslate"><span class="pre">ExpectResult</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.channel.ExpectResult.i"><code class="docutils literal notranslate"><span class="pre">ExpectResult.i</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.channel.ExpectResult.match"><code class="docutils literal notranslate"><span class="pre">ExpectResult.match</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.channel.ExpectResult.before"><code class="docutils literal notranslate"><span class="pre">ExpectResult.before</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.channel.ExpectResult.after"><code class="docutils literal notranslate"><span class="pre">ExpectResult.after</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#implementations">Implementations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.channel.SubprocessChannel"><code class="docutils literal notranslate"><span class="pre">SubprocessChannel</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.channel.ParamikoChannel"><code class="docutils literal notranslate"><span class="pre">ParamikoChannel</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#channelio-interface"><code class="docutils literal notranslate"><span class="pre">ChannelIO</span></code> interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbot.machine.channel.ChannelIO"><code class="docutils literal notranslate"><span class="pre">ChannelIO</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.ChannelIO.write"><code class="docutils literal notranslate"><span class="pre">ChannelIO.write()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.ChannelIO.read"><code class="docutils literal notranslate"><span class="pre">ChannelIO.read()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.ChannelIO.close"><code class="docutils literal notranslate"><span class="pre">ChannelIO.close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.ChannelIO.fileno"><code class="docutils literal notranslate"><span class="pre">ChannelIO.fileno()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.ChannelIO.closed"><code class="docutils literal notranslate"><span class="pre">ChannelIO.closed</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tbot.machine.channel.ChannelIO.update_pty"><code class="docutils literal notranslate"><span class="pre">ChannelIO.update_pty()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="error.html"><code class="docutils literal notranslate"><span class="pre">tbot.error</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="role.html"><code class="docutils literal notranslate"><span class="pre">tbot.role</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="selectable.html"><code class="docutils literal notranslate"><span class="pre">tbot.selectable</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testcase Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tc.html"><code class="docutils literal notranslate"><span class="pre">tbot.tc</span></code> - Builtin Testcases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/connector.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.connector</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/gdb.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.gdb</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/gpio.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.gpio</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/linux.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.linux</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/locking.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.locking</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/swupdate.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.swupdate</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/timing.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.timing</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/uboot.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.uboot</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/utils.html"><code class="docutils literal notranslate"><span class="pre">tbot_contrib.utils</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing to tbot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSE.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><code class="docutils literal notranslate"><span class="pre">tbot.machine.channel</span></code></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/modules/machine_channel.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

           <div itemprop="articleBody">
             
  <section id="tbot-machine-channel">
<span id="module-tbot.machine.channel"></span><h1><code class="docutils literal notranslate"><span class="pre">tbot.machine.channel</span></code><a class="headerlink" href="#tbot-machine-channel" title="Link to this heading">¶</a></h1>
<p>The <a class="reference internal" href="#module-tbot.machine.channel" title="tbot.machine.channel"><code class="xref py py-mod docutils literal notranslate"><span class="pre">channel</span></code></a> module provides the low-level
implementation if interaction with machine.  A channel is analogous to a serial
connection: You can send and receive bytes.  This ‘raw’ interface is abstracted
as a <a class="reference internal" href="#tbot.machine.channel.ChannelIO" title="tbot.machine.channel.ChannelIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelIO</span></code></a>, for which there are multiple
<a class="reference internal" href="#chanio-impls"><span class="std std-ref">Implementations</span></a>.</p>
<section id="channel-class">
<h2><code class="docutils literal notranslate"><span class="pre">Channel</span></code> class<a class="headerlink" href="#channel-class" title="Link to this heading">¶</a></h2>
<p>The channel class has multiple different interfaces at different levels of
abstraction which allow interacting with the underlying ‘raw’ channel.  These
are:</p>
<ul class="simple">
<li><p><strong>Byte-level interface</strong>: The <a class="reference internal" href="#tbot.machine.channel.Channel.write" title="tbot.machine.channel.Channel.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code></a>
and <a class="reference internal" href="#tbot.machine.channel.Channel.read" title="tbot.machine.channel.Channel.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code></a> methods allow the most
basic interaction.  For a bit more ergonomic use, there is also a
<a class="reference internal" href="#tbot.machine.channel.Channel.read_iter" title="tbot.machine.channel.Channel.read_iter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_iter()</span></code></a>.</p></li>
<li><p><strong>Log-stream interface</strong>: For interaction with the <a class="reference internal" href="log.html#module-tbot.log" title="tbot.log"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tbot.log</span></code></a> module
and to allow capturing the entire received data in parallel to interfacing
with the remote, channels provide the
<a class="reference internal" href="#tbot.machine.channel.Channel.with_stream" title="tbot.machine.channel.Channel.with_stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">with_stream()</span></code></a> context manager.</p></li>
<li><p><strong>Death-strings</strong>: ‘Death-strings’ are strings (or regular expressions),
which should never appear on the channel and when they do, an exception will
be raised.  In an embedded setting, it might make sense to add the
kernel-panic header as a death-string, for example.  For this purpose, the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">with_death_string()</span></code> context-manager is
provided.</p></li>
<li><p><strong>pexpect interface</strong>: tbot’s channel implementation also has methods
mimicking the pexpect interface.  These are:</p>
<ul>
<li><p><a class="reference internal" href="#tbot.machine.channel.Channel.send" title="tbot.machine.channel.Channel.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a></p></li>
<li><p><a class="reference internal" href="#tbot.machine.channel.Channel.sendline" title="tbot.machine.channel.Channel.sendline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sendline()</span></code></a></p></li>
<li><p><a class="reference internal" href="#tbot.machine.channel.Channel.sendintr" title="tbot.machine.channel.Channel.sendintr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sendintr()</span></code></a></p></li>
<li><p><a class="reference internal" href="#tbot.machine.channel.Channel.readline" title="tbot.machine.channel.Channel.readline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">readline()</span></code></a></p></li>
<li><p><a class="reference internal" href="#tbot.machine.channel.Channel.expect" title="tbot.machine.channel.Channel.expect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">expect()</span></code></a></p></li>
</ul>
</li>
<li><p><strong>Prompt handling</strong>: The <a class="reference internal" href="#tbot.machine.channel.Channel.read_until_prompt" title="tbot.machine.channel.Channel.read_until_prompt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_until_prompt()</span></code></a>
method allows waiting for a prompt string to appear.  A global prompt-string
can be configured with <a class="reference internal" href="#tbot.machine.channel.Channel.with_prompt" title="tbot.machine.channel.Channel.with_prompt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">with_prompt()</span></code></a>.</p></li>
<li><p><strong>Borrowing &amp; taking</strong>: To model ownership of the channel, the
<a class="reference internal" href="#tbot.machine.channel.Channel.borrow" title="tbot.machine.channel.Channel.borrow"><code class="xref py py-meth docutils literal notranslate"><span class="pre">borrow()</span></code></a> context-handler allows
creating a copy of the channel which temporarily holds exclusive access to
it.  This ensures that all references to the old channel are blocked for the
duration of the borrow.  <a class="reference internal" href="#tbot.machine.channel.Channel.take" title="tbot.machine.channel.Channel.take"><code class="xref py py-meth docutils literal notranslate"><span class="pre">take()</span></code></a> does
the same thing but permanently moves ownership.</p></li>
<li><p><strong>Interactive Mode</strong>: Using
<a class="reference internal" href="#tbot.machine.channel.Channel.attach_interactive" title="tbot.machine.channel.Channel.attach_interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">attach_interactive()</span></code></a>, an interactive
session with this channel can be started.</p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.channel.</span></span><span class="sig-name descname"><span class="pre">Channel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel_io</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tbot.machine.channel.ChannelIO" title="tbot.machine.channel.channel.ChannelIO"><span class="pre">ChannelIO</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.ContextManager" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextManager</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.slow_send_delay">
<span class="sig-name descname"><span class="pre">slow_send_delay</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="#tbot.machine.channel.Channel.slow_send_delay" title="Link to this definition">¶</a></dt>
<dd><p>There are unfortunately some serial consoles which cannot process large
amounts of data at once.  The receive buffer on the other end overflows
and characters get dropped.</p>
<p>To mitigate this, a <a class="reference internal" href="#tbot.machine.channel.Channel" title="tbot.machine.channel.Channel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Channel</span></code></a> can be
configured to send chunks of data with a delay.  To do this, set the
<a class="reference internal" href="#tbot.machine.channel.Channel.slow_send_delay" title="tbot.machine.channel.Channel.slow_send_delay"><code class="xref py py-attr docutils literal notranslate"><span class="pre">slow_send_delay</span></code></a> to a (fractional) number of seconds to wait
between chunks and <a class="reference internal" href="#tbot.machine.channel.Channel.slow_send_chunksize" title="tbot.machine.channel.Channel.slow_send_chunksize"><code class="xref py py-attr docutils literal notranslate"><span class="pre">slow_send_chunksize</span></code></a> to the maximum size
of each chunk to send.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Configuration for a machine which needs slow sending</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BoardWithSlowSend</span><span class="p">(</span><span class="n">connector</span><span class="o">.</span><span class="n">ConsoleConnector</span><span class="p">,</span> <span class="n">board</span><span class="o">.</span><span class="n">Board</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mach</span><span class="p">):</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="n">mach</span><span class="o">.</span><span class="n">open_channel</span><span class="p">(</span><span class="s2">&quot;picocom&quot;</span><span class="p">,</span> <span class="s2">&quot;-b&quot;</span><span class="p">,</span> <span class="s2">&quot;115200&quot;</span><span class="p">,</span> <span class="s2">&quot;-q&quot;</span><span class="p">,</span> <span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">)</span>
        <span class="n">ch</span><span class="o">.</span><span class="n">slow_send_delay</span> <span class="o">=</span> <span class="mf">0.01</span>
        <span class="n">ch</span><span class="o">.</span><span class="n">slow_send_chunksize</span> <span class="o">=</span> <span class="mi">32</span>
        <span class="k">return</span> <span class="n">ch</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.3.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.slow_send_chunksize">
<span class="sig-name descname"><span class="pre">slow_send_chunksize</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#tbot.machine.channel.Channel.slow_send_chunksize" title="Link to this definition">¶</a></dt>
<dd><p>Maximum size of each chunk to send, when <a class="reference internal" href="#tbot.machine.channel.Channel.slow_send_delay" title="tbot.machine.channel.Channel.slow_send_delay"><code class="xref py py-attr docutils literal notranslate"><span class="pre">slow_send_delay</span></code></a> is
set.  Check its documentation for details.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.3.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">_ignore_blacklist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.write" title="Link to this definition">¶</a></dt>
<dd><p>Write some bytes to this channel.</p>
<p><code class="docutils literal notranslate"><span class="pre">write()</span></code> ensures the whole buffer was written.  If this was not possible,
it will throw an exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>buf</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a>) – Buffer with bytes to be written.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ChannelClosedException</strong> – If the channel was closed previous to, or
during writing.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.read" title="Link to this definition">¶</a></dt>
<dd><p>Receive some bytes from this channel.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">n</span></code> is <code class="docutils literal notranslate"><span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">read()</span></code> will wait until at least one byte is available
and will then return all available bytes.  Otherwise it will wait until exactly
<code class="docutils literal notranslate"><span class="pre">n</span></code> bytes could be read.  If timeout is not None and expires before this is
the case, <code class="docutils literal notranslate"><span class="pre">read()</span></code> will raise an exception.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">read()</span></code> does not ensure that the returned bytes end with the end of a
Unicode character boundary.  This means, decoding as Unicode can fail and
code using <code class="docutils literal notranslate"><span class="pre">read()</span></code> should be prepared to deal with this case.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Number of bytes to read.  If <code class="docutils literal notranslate"><span class="pre">n</span></code> is not <code class="docutils literal notranslate"><span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">read()</span></code> will
return <strong>exactly</strong> <code class="docutils literal notranslate"><span class="pre">n</span></code> bytes.  If <code class="docutils literal notranslate"><span class="pre">n</span></code> is <code class="docutils literal notranslate"><span class="pre">-1</span></code>, at least one byte is
returned.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Optional timeout.  If <code class="docutils literal notranslate"><span class="pre">timout</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">read()</span></code>
will return early after <code class="docutils literal notranslate"><span class="pre">timeout</span></code> seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)">bytes</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.read_iter">
<span class="sig-name descname"><span class="pre">read_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">9223372036854775807</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.read_iter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.read_iter" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over chunks of bytes read from the channel.</p>
<p><code class="docutils literal notranslate"><span class="pre">read_iter</span></code> reads at most <code class="docutils literal notranslate"><span class="pre">max</span></code> bytes from the channel before the
iterator is exhausted.  If <code class="docutils literal notranslate"><span class="pre">timeout</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code> and expires
before <code class="docutils literal notranslate"><span class="pre">max</span></code> bytes could be read, the next iteration attempt will
raise an exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Maximum number of bytes to read.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Optional timeout.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.with_stream">
<span class="sig-name descname"><span class="pre">with_stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TextIO" title="(in Python v3.13)"><span class="pre">TextIO</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tbot.machine.channel.Channel" title="tbot.machine.channel.channel.Channel"><span class="pre">Channel</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.with_stream"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.with_stream" title="Link to this definition">¶</a></dt>
<dd><p>Attach a stream to this channel.</p>
<p>All data read from the channel will also be sent to the stream.  This
can be used, for example, to capture the entire boot-log of a board.
<code class="docutils literal notranslate"><span class="pre">with_stream</span></code> should be used as a context-manager:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">tbot</span>

<span class="k">with</span> <span class="n">tbot</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;Output: &quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ev</span><span class="p">,</span> <span class="n">chan</span><span class="o">.</span><span class="n">with_stream</span><span class="p">(</span><span class="n">ev</span><span class="p">):</span>
    <span class="c1"># During this context block, output is captured into `ev`</span>
    <span class="o">...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream</strong> (<a class="reference external" href="https://docs.python.org/3/library/io.html#io.TextIOBase" title="(in Python v3.13)"><em>io.TextIOBase</em></a>) – The stream to attach.</p></li>
<li><p><strong>show_prompt</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether the currently configured prompt should
also be sent to the stream if detected.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.fileno">
<span class="sig-name descname"><span class="pre">fileno</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.fileno"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.fileno" title="Link to this definition">¶</a></dt>
<dd><p>Return a file descriptor which represents this channel.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.close" title="Link to this definition">¶</a></dt>
<dd><p>Close this channel.</p>
<p>The following is always true:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">channel</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">channel</span><span class="o">.</span><span class="n">closed</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.closed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">closed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#tbot.machine.channel.Channel.closed" title="Link to this definition">¶</a></dt>
<dd><p>Whether this channel was already closed.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A <code class="docutils literal notranslate"><span class="pre">channel.write()</span></code> immediately after checking <code class="docutils literal notranslate"><span class="pre">channel.closed</span></code> might
still fail in the unlucky case where the remote end closed the channel just
in between the two calls.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.send">
<span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_back</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_ignore_blacklist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.send"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.send" title="Link to this definition">¶</a></dt>
<dd><p>Send data to this channel.</p>
<p>Send <code class="docutils literal notranslate"><span class="pre">s</span></code> to this channel and optionally read it back (to not clobber
the next read).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>,</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a>) – Data to send.  A <code class="docutils literal notranslate"><span class="pre">str</span></code> will be encoded as UTF-8.</p></li>
<li><p><strong>read_back</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to read back the sent data.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Optional timeout for reading back data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.sendline">
<span class="sig-name descname"><span class="pre">sendline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_back</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.sendline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.sendline" title="Link to this definition">¶</a></dt>
<dd><p>Send data to this channel and terminate with a newline.</p>
<p>Send <code class="docutils literal notranslate"><span class="pre">s</span></code> and a newline (<code class="docutils literal notranslate"><span class="pre">\r</span></code>) to this channel and optionally read
it back (to not clobber the next read).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>,</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a>) – Data to send.  A <code class="docutils literal notranslate"><span class="pre">str</span></code> will be encoded as UTF-8.</p></li>
<li><p><strong>read_back</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to read back the sent data.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Optional timeout for reading back data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.sendcontrol">
<span class="sig-name descname"><span class="pre">sendcontrol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.sendcontrol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.sendcontrol" title="Link to this definition">¶</a></dt>
<dd><p>Send a control-character to this terminal.</p>
<p><code class="docutils literal notranslate"><span class="pre">c</span></code> is the keyboard key which would need to be pressed (for example
<code class="docutils literal notranslate"><span class="pre">C</span></code> for <code class="docutils literal notranslate"><span class="pre">CTRL-C</span></code>).  See <a class="reference external" href="https://en.wikipedia.org/wiki/C0_and_C1_control_codes">C0 and C1 control codes</a> for more info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>c</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Control character to send.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.sendintr">
<span class="sig-name descname"><span class="pre">sendintr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.sendintr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.sendintr" title="Link to this definition">¶</a></dt>
<dd><p>Send <code class="docutils literal notranslate"><span class="pre">CTRL-C</span></code> to this channel.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.readline">
<span class="sig-name descname"><span class="pre">readline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lineending</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'\r\n'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.readline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.readline" title="Link to this definition">¶</a></dt>
<dd><p>Read until the next line ending.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ch</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;echo Hello; echo World&quot;</span><span class="p">,</span> <span class="n">read_back</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">ch</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Hello</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="k">assert</span> <span class="n">ch</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;World</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.expect">
<span class="sig-name descname"><span class="pre">expect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patterns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BoundedPattern</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Pattern" title="(in Python v3.13)"><span class="pre">Pattern</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BoundedPattern</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Pattern" title="(in Python v3.13)"><span class="pre">Pattern</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#tbot.machine.channel.channel.ExpectResult" title="tbot.machine.channel.channel.ExpectResult"><span class="pre">ExpectResult</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.expect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.expect" title="Link to this definition">¶</a></dt>
<dd><p>Wait for a pattern to appear in the incoming data.</p>
<p>This method is similar to <a class="reference external" href="https://pexpect.readthedocs.io/en/stable/overview.html">pexpect</a>’s <code class="docutils literal notranslate"><span class="pre">expect()</span></code> although there are
a few important differences.</p>
<p><code class="docutils literal notranslate"><span class="pre">expect()</span></code> will read ahead in the input stream until one of the
patterns in <code class="docutils literal notranslate"><span class="pre">patterns</span></code> matches or, if not <code class="docutils literal notranslate"><span class="pre">None</span></code>, the <code class="docutils literal notranslate"><span class="pre">timeout</span></code>
expires.  It might read further than the given pattern, if the input
contains follow-up bytes in the same chunk of data.</p>
<p>Different to <a class="reference external" href="https://pexpect.readthedocs.io/en/stable/overview.html">pexpect</a>, the results are available as an
<a class="reference internal" href="#channel-expect-result"><span class="std std-ref">Expect Result</span></a> (<a class="reference internal" href="#tbot.machine.channel.channel.ExpectResult" title="tbot.machine.channel.channel.ExpectResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectResult</span></code></a>)
which is returned on match.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>patterns</strong> – Pattern(s) to wait for.  Can be either a single
pattern or a list of patterns.  See <a class="reference internal" href="#channel-search-string"><span class="std std-ref">Search Strings</span></a>
for more info about which types can be passed as patterns.</p></li>
<li><p><strong>timeout</strong> (<em>None</em><em>,</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Optional timeout.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.with_prompt">
<span class="sig-name descname"><span class="pre">with_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt_in</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BoundedPattern</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Pattern" title="(in Python v3.13)"><span class="pre">Pattern</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tbot.machine.channel.Channel" title="tbot.machine.channel.channel.Channel"><span class="pre">Channel</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.with_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.with_prompt" title="Link to this definition">¶</a></dt>
<dd><p>Set the prompt for this channel during a context.</p>
<p><code class="docutils literal notranslate"><span class="pre">with_prompt</span></code> is a context-manager that sets the prompt for this
channel for the duration of a context:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">chan</span><span class="o">.</span><span class="n">with_prompt</span><span class="p">(</span><span class="s2">&quot;=&gt; &quot;</span><span class="p">):</span>
    <span class="n">chan</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;echo Foo&quot;</span><span class="p">,</span> <span class="n">read_back</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># Waits for `=&gt; `</span>
    <span class="n">chan</span><span class="o">.</span><span class="n">read_until_prompt</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prompt</strong> (<a class="reference internal" href="#tbot.machine.channel.ConvenientSearchString" title="tbot.machine.channel.ConvenientSearchString"><em>ConvenientSearchString</em></a>) – The new prompt pattern/string.
See <a class="reference internal" href="#channel-search-string"><span class="std std-ref">Search Strings</span></a> for more info.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.read_until_prompt">
<span class="sig-name descname"><span class="pre">read_until_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BoundedPattern</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Pattern" title="(in Python v3.13)"><span class="pre">Pattern</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.read_until_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.read_until_prompt" title="Link to this definition">¶</a></dt>
<dd><p>Read until prompt is detected.</p>
<p>Read from the channel until the configured prompt string is detected.
All data captured up until the prompt is returned, decoded as UTF-8.
If <code class="docutils literal notranslate"><span class="pre">prompt</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the prompt which was set using
<a class="reference internal" href="#tbot.machine.channel.Channel.with_prompt" title="tbot.machine.channel.Channel.with_prompt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tbot.machine.channel.Channel.with_prompt()</span></code></a> is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prompt</strong> (<a class="reference internal" href="#tbot.machine.channel.ConvenientSearchString" title="tbot.machine.channel.ConvenientSearchString"><em>ConvenientSearchString</em></a>) – The prompt to read up to.  It
must appear as the very last readable data in the channel’s data
stream.  See <a class="reference internal" href="#channel-search-string"><span class="std std-ref">Search Strings</span></a> for more info about which
types can be passed for this parameter.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Optional timeout.  If <code class="docutils literal notranslate"><span class="pre">timeout</span></code> is set and
expires before the prompt was detected, <code class="docutils literal notranslate"><span class="pre">read_until_prompt</span></code>
raises an exception.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>UTF-8 decoded string of all bytes read up to the prompt.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.read_until_timeout">
<span class="sig-name descname"><span class="pre">read_until_timeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.read_until_timeout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.read_until_timeout" title="Link to this definition">¶</a></dt>
<dd><p>Read until the given timeout expires.</p>
<p>This method will only return after the given timeout expires.  This can
be useful when waiting for something to start up, but when all console
output should still become immediately visible on stdout.</p>
<p>Another use-case is waiting for a death-string to appear or a
run-command to exit.  In those cases, pass <code class="docutils literal notranslate"><span class="pre">None</span></code> as timeout to make
this method wait indefinitely.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – The time to wait for, before returning.  Can be
<code class="docutils literal notranslate"><span class="pre">None</span></code> to signal infinite wait time.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>All data received while waiting.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.borrow">
<span class="sig-name descname"><span class="pre">borrow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tbot.machine.channel.Channel" title="tbot.machine.channel.channel.Channel"><span class="pre">Channel</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.borrow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.borrow" title="Link to this definition">¶</a></dt>
<dd><p>Temporarily borrow this channel for the duration of a context.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">chan</span><span class="o">.</span><span class="n">borrow</span><span class="p">()</span> <span class="k">as</span> <span class="n">chan2</span><span class="p">:</span>
    <span class="c1"># `chan` cannot be accessed inside this context</span>
    <span class="n">chan2</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>

<span class="c1"># `chan` can be accessed again here</span>
<span class="n">chan</span><span class="o">.</span><span class="n">sendintr</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.take">
<span class="sig-name descname"><span class="pre">take</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#tbot.machine.channel.Channel" title="tbot.machine.channel.channel.Channel"><span class="pre">Channel</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.take"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.take" title="Link to this definition">¶</a></dt>
<dd><p>Move ownership of this channel.</p>
<p>All existing references to this channel will no longer be accessible
after calling <code class="docutils literal notranslate"><span class="pre">take()</span></code>.  Use this to mark transitions of a channel
into a new (irreversible) context.  For example, when a board boots
from U-Boot to Linux, U-Boot is no longer accessible.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.Channel.attach_interactive">
<span class="sig-name descname"><span class="pre">attach_interactive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">end_magic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctrld_exit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#Channel.attach_interactive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.Channel.attach_interactive" title="Link to this definition">¶</a></dt>
<dd><p>Connect tbot’s terminal to this channel.</p>
<p>Allows the user to interact directly with whatever this channel is
connected to.</p>
<p>The interactive session can be exited at any point by <strong>pressing</strong>
<code class="docutils literal notranslate"><span class="pre">CTRL+]</span></code> <strong>three times within 1 second</strong>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>end_magic</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a>) – The <code class="docutils literal notranslate"><span class="pre">end_magic</span></code> parameter may be used to
define an automatic exit condition (sequence sent from the remote
side to trigger the end).</p></li>
<li><p><strong>ctrld_exit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, pressing <code class="docutils literal notranslate"><span class="pre">CTRL-D</span></code> will also
terminate the session immediately.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.10.1: </span></p>
<ul class="simple">
<li><p>The escape sequence is now “Press <code class="docutils literal notranslate"><span class="pre">CTRL-]</span></code> three times within 1
second”.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ctrld_exit</span></code> parameter was added to restore the old
“<code class="docutils literal notranslate"><span class="pre">CTRL-D</span></code> to exit” behavior.</p></li>
</ul>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="search-strings">
<span id="channel-search-string"></span><h2>Search Strings<a class="headerlink" href="#search-strings" title="Link to this heading">¶</a></h2>
<p>A lot of channel methods are marked to take a <a class="reference internal" href="#tbot.machine.channel.ConvenientSearchString" title="tbot.machine.channel.ConvenientSearchString"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConvenientSearchString</span></code></a>:</p>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.channel.ConvenientSearchString">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.channel.</span></span><span class="sig-name descname"><span class="pre">ConvenientSearchString</span></span><a class="headerlink" href="#tbot.machine.channel.ConvenientSearchString" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>This is just an ‘umbrella’ above a few different possible types which can be
passed in here:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>: Will be matched literally.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>: Will be encoded as UTF-8 and the resulting bytes are matched literally.</p></li>
<li><p><em>Compiled Regex Pattern</em>: An <code class="docutils literal notranslate"><span class="pre">re</span></code> <strong>byte</strong>-pattern with a bounded
length can also be passed in.  The bounded length is required for efficient
searching.  This means, instead of <code class="docutils literal notranslate"><span class="pre">.*</span></code> you need to match a maximum number
of chars like <code class="docutils literal notranslate"><span class="pre">.{0,80}</span></code>.</p></li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>

<span class="c1"># A `str` or `bytes` object will be matched literally</span>
<span class="k">with</span> <span class="n">chan</span><span class="o">.</span><span class="n">with_death_string</span><span class="p">(</span><span class="s2">&quot;Kernel panic - not syncing: &quot;</span><span class="p">):</span>
   <span class="o">...</span>

<span class="c1"># A regexp pattern (byte-pattern!)</span>
<span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;[a-zA-Z0-9-]{1,80} login: &quot;</span><span class="p">)</span>
<span class="n">chan</span><span class="o">.</span><span class="n">read_until_prompt</span><span class="p">(</span><span class="n">pat</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="expect-result">
<span id="channel-expect-result"></span><h2>Expect Result<a class="headerlink" href="#expect-result" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.channel.channel.ExpectResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.channel.channel.</span></span><span class="sig-name descname"><span class="pre">ExpectResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">match</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Match" title="(in Python v3.13)"><span class="pre">Match</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#ExpectResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.channel.ExpectResult" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NamedTuple" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NamedTuple</span></code></a></p>
<p>Result from a call to <a class="reference internal" href="#tbot.machine.channel.Channel.expect" title="tbot.machine.channel.Channel.expect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">expect()</span></code></a>.</p>
<p>Create new instance of ExpectResult(i, match, before, after)</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tbot.machine.channel.channel.ExpectResult.i">
<span class="sig-name descname"><span class="pre">i</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#tbot.machine.channel.channel.ExpectResult.i" title="Link to this definition">¶</a></dt>
<dd><p>Index into the pattern list of the matched pattern (if a list was passed to
<a class="reference internal" href="#tbot.machine.channel.Channel.expect" title="tbot.machine.channel.Channel.expect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">expect()</span></code></a>).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tbot.machine.channel.channel.ExpectResult.match">
<span class="sig-name descname"><span class="pre">match</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Match" title="(in Python v3.13)"><span class="pre">Match</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#tbot.machine.channel.channel.ExpectResult.match" title="Link to this definition">¶</a></dt>
<dd><p>Match object if the pattern was a regex-pattern or the literal if the
pattern was a <code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">bytes</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tbot.machine.channel.channel.ExpectResult.before">
<span class="sig-name descname"><span class="pre">before</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#tbot.machine.channel.channel.ExpectResult.before" title="Link to this definition">¶</a></dt>
<dd><p>Everything from the input stream before the match, up to the matched pattern.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tbot.machine.channel.channel.ExpectResult.after">
<span class="sig-name descname"><span class="pre">after</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#tbot.machine.channel.channel.ExpectResult.after" title="Link to this definition">¶</a></dt>
<dd><p>Any potential bytes which were read following the matched pattern.</p>
</dd></dl>

</dd></dl>

</section>
<section id="implementations">
<span id="chanio-impls"></span><h2>Implementations<a class="headerlink" href="#implementations" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.channel.SubprocessChannel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.channel.</span></span><span class="sig-name descname"><span class="pre">SubprocessChannel</span></span><a class="reference internal" href="../_modules/tbot/machine/channel/subprocess.html#SubprocessChannel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.SubprocessChannel" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tbot.machine.channel.Channel" title="tbot.machine.channel.channel.Channel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Channel</span></code></a></p>
<p>A channel based on opening a shell in a subprocess.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.channel.ParamikoChannel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.channel.</span></span><span class="sig-name descname"><span class="pre">ParamikoChannel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.paramiko.org/en/2.4/api/channel.html#paramiko.channel.Channel" title="(in Paramiko)"><span class="pre">Channel</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tbot/machine/channel/paramiko.html#ParamikoChannel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.ParamikoChannel" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tbot.machine.channel.Channel" title="tbot.machine.channel.channel.Channel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Channel</span></code></a></p>
<p>A channel based on opening an SSH-connection via paramiko.</p>
</dd></dl>

</section>
<section id="channelio-interface">
<h2><code class="docutils literal notranslate"><span class="pre">ChannelIO</span></code> interface<a class="headerlink" href="#channelio-interface" title="Link to this heading">¶</a></h2>
<p>This is the interface each channel implementation needs to implement.  The
actual channel class is just a wrapper ontop of it.</p>
<dl class="py class">
<dt class="sig sig-object py" id="tbot.machine.channel.ChannelIO">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tbot.machine.channel.</span></span><span class="sig-name descname"><span class="pre">ChannelIO</span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#ChannelIO"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.ChannelIO" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.ContextManager" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextManager</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.ChannelIO.write">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#ChannelIO.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.ChannelIO.write" title="Link to this definition">¶</a></dt>
<dd><p>Write some bytes to this channel.</p>
<p><code class="docutils literal notranslate"><span class="pre">write()</span></code> returns the number of bytes written.  This number might be lower
than <code class="docutils literal notranslate"><span class="pre">len(buf)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>buf</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a>) – Buffer with bytes to be written.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ChannelClosedException</strong> – If the channel was closed previous to, or
during writing.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.ChannelIO.read">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#ChannelIO.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.ChannelIO.read" title="Link to this definition">¶</a></dt>
<dd><p>Receive some bytes from this channel.</p>
<p>Return at most <code class="docutils literal notranslate"><span class="pre">n</span></code> bytes, but at least 1 (if <code class="docutils literal notranslate"><span class="pre">n</span></code> is not <code class="docutils literal notranslate"><span class="pre">0</span></code>).  Raise an
exception if <code class="docutils literal notranslate"><span class="pre">timeout</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code> and expires before data was received.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Maximum number of bytes to read.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Optional timeout.  If <code class="docutils literal notranslate"><span class="pre">timout</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">read()</span></code>
will return early after <code class="docutils literal notranslate"><span class="pre">timeout</span></code> seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)">bytes</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.ChannelIO.close">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#ChannelIO.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.ChannelIO.close" title="Link to this definition">¶</a></dt>
<dd><p>Close this channel.</p>
<p>The following invariant <strong>must</strong> be upheld by an implementation:</p>
<blockquote>
<div><p>channel.close()
assert channel.closed</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.ChannelIO.fileno">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fileno</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#ChannelIO.fileno"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.ChannelIO.fileno" title="Link to this definition">¶</a></dt>
<dd><p>Return a file descriptor which represents this channel.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tbot.machine.channel.ChannelIO.closed">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">closed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#tbot.machine.channel.ChannelIO.closed" title="Link to this definition">¶</a></dt>
<dd><p>Whether this channel was already closed.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tbot.machine.channel.ChannelIO.update_pty">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">update_pty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/tbot/machine/channel/channel.html#ChannelIO.update_pty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tbot.machine.channel.ChannelIO.update_pty" title="Link to this definition">¶</a></dt>
<dd><p>Update the terminal window size of this channel.</p>
<p>Channels lacking this functionality should silently ignore this call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – The new width of the pty.</p></li>
<li><p><strong>lines</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – The new height of the pty.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
    <a href="https://github.com/Rahix/tbot">
        <img style="position: absolute; top: 0; right: 0; border: 0;" decoding="async" width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" loading="lazy" data-recalc-dims="1">
    </a>

          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="machine_shell.html" class="btn btn-neutral float-left" title="tbot.machine.shell" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="error.html" class="btn btn-neutral float-right" title="tbot.error" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Rahix.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>